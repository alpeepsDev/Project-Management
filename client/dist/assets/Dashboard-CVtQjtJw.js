import{b as U,r as u,j as e,R as G,c as Ze,n as $,u as cs}from"./index-BG7qDbVf.js";import{u as J}from"./useTheme-jTc86hPO.js";import{u as Ks,a as Ys,o as Xs,s as _t}from"./validation-DEcDGhQ-.js";const ie={getProjectTasks:async t=>(await U.get(`/tasks/project/${t}`)).data,getTask:async t=>(await U.get(`/tasks/${t}`)).data,createTask:async t=>(await U.post("/tasks",t)).data,updateTask:async(t,s)=>(await U.put(`/tasks/${t}`,s)).data,moveTask:async(t,{status:s,position:r})=>(await U.put(`/tasks/${t}/move`,{status:s,position:r})).data,assignTask:async(t,s)=>(await U.put(`/tasks/${t}/assign`,{assigneeId:s})).data,deleteTask:async t=>(await U.delete(`/tasks/${t}`)).data,getTaskComments:async t=>(await U.get(`/tasks/${t}/comments`)).data,addTaskComment:async(t,s)=>(await U.post(`/tasks/${t}/comments`,{content:s})).data,getTasksAwaitingApproval:async()=>(await U.get("/tasks/manager/awaiting-approval")).data,getManagerStats:async()=>(await U.get("/tasks/manager/stats")).data,getManagerTasks:async()=>(await U.get("/tasks/manager/all-tasks")).data,approveTask:async t=>(await U.put(`/tasks/${t}/approve`)).data},xe={getUserProjects:async()=>(await U.get("/projects")).data,getProject:async t=>(await U.get(`/projects/${t}`)).data,createProject:async t=>(await U.post("/projects",t)).data,updateProject:async(t,s)=>(await U.put(`/projects/${t}`,s)).data,deleteProject:async t=>(await U.delete(`/projects/${t}`)).data,addMember:async(t,s,r="USER")=>(await U.post(`/projects/${t}/members`,{userId:s,role:r})).data,removeMember:async(t,s)=>(await U.delete(`/projects/${t}/members/${s}`)).data,updateMemberRole:async(t,s,r)=>(await U.put(`/projects/${t}/members/${s}`,{role:r})).data,getAllUsers:async()=>(await U.get("/users")).data},Js=()=>{const[t,s]=u.useState({projectCount:0,totalTasks:0,tasksAwaitingApproval:0,overdueTasks:0,totalTeamMembers:0}),[r,a]=u.useState([]),[i,n]=u.useState([]),[l,o]=u.useState([]),[d,c]=u.useState(!1),[v,g]=u.useState(null),p=u.useCallback(async()=>{try{const h=await ie.getManagerStats(),w=h.data||h||{projectCount:0,totalTasks:0,tasksAwaitingApproval:0,overdueTasks:0,totalTeamMembers:0};s(w)}catch(h){console.error("Failed to fetch manager stats:",h),g(h.response?.data?.message||h.message)}},[]),x=u.useCallback(async()=>{try{const h=await ie.getTasksAwaitingApproval(),w=h.data||h||[];a(w)}catch(h){console.error("Failed to fetch tasks awaiting approval:",h),g(h.response?.data?.message||h.message)}},[]),y=u.useCallback(async()=>{try{const h=await ie.getManagerTasks(),w=h.data||h||[];n(w)}catch(h){console.error("Failed to fetch all tasks:",h),g(h.response?.data?.message||h.message)}},[]),b=u.useCallback(async()=>{try{const h=await xe.getUserProjects(),w=h.data||h||[];o(w)}catch(h){console.error("Failed to fetch projects:",h),g(h.response?.data?.message||h.message)}},[]),m=async h=>{c(!0);try{return await ie.approveTask(h),await Promise.all([p(),x(),y()]),{success:!0}}catch(w){const E=w.response?.data?.message||w.message;throw g(E),new Error(E)}finally{c(!1)}},f=async h=>{c(!0);try{const w=await xe.createProject(h);return await b(),await p(),w.data}catch(w){const E=w.response?.data?.message||w.message;throw g(E),new Error(E)}finally{c(!1)}},j=u.useCallback(async()=>{c(!0),g(null);try{await Promise.all([p(),x(),y(),b()])}catch(h){console.error("Failed to refresh dashboard:",h),g(h.response?.data?.message||h.message)}finally{c(!1)}},[p,x,y,b]),N=u.useCallback(h=>i.filter(w=>w.projectId===h),[i]),C=u.useCallback(()=>{const h=new Date;return i.filter(w=>w.dueDate&&new Date(w.dueDate)<h&&w.status!=="COMPLETED")},[i]);return u.useEffect(()=>{j()},[j]),{stats:t,tasksAwaitingApproval:r,allTasks:i,projects:l,loading:d,error:v,approveTask:m,createProject:f,refreshDashboard:j,getProjectTasks:N,getOverdueTasks:C}},Qs=()=>{const[t,s]=u.useState([]),[r,a]=u.useState(!1),[i,n]=u.useState(null),l=u.useCallback(async()=>{a(!0),n(null);try{const x=await xe.getUserProjects(),y=x.data||x;s(Array.isArray(y)?y:[])}catch(x){n(x.response?.data?.message||x.message),console.error("Failed to fetch projects:",x)}finally{a(!1)}},[]),o=async x=>{a(!0);try{const y=await xe.createProject(x);return s(b=>[...Array.isArray(b)?b:[],y]),y}catch(y){throw n(y.response?.data?.message||y.message),y}finally{a(!1)}},d=async(x,y)=>{a(!0);try{const b=await xe.updateProject(x,y);return s(m=>(Array.isArray(m)?m:[]).map(f=>f.id===x?b:f)),b}catch(b){throw n(b.response?.data?.message||b.message),b}finally{a(!1)}},c=async x=>{a(!0);try{await xe.deleteProject(x),s(y=>(Array.isArray(y)?y:[]).filter(b=>b.id!==x))}catch(y){throw n(y.response?.data?.message||y.message),y}finally{a(!1)}},v=async(x,y,b="USER")=>{try{await xe.addMember(x,y,b),await l()}catch(m){throw n(m.response?.data?.message||m.message),m}},g=async(x,y)=>{try{await xe.removeMember(x,y),await l()}catch(b){throw n(b.response?.data?.message||b.message),b}},p=async(x,y,b)=>{try{await xe.updateMemberRole(x,y,b),await l()}catch(m){throw n(m.response?.data?.message||m.message),m}};return u.useEffect(()=>{l()},[l]),{projects:t,loading:r,error:i,fetchProjects:l,createProject:o,updateProject:d,deleteProject:c,addMember:v,removeMember:g,updateMemberRole:p}},We={createExchange:async t=>(await U.post("/exchanges",t)).data,getUserExchanges:async()=>(await U.get("/exchanges")).data,getProjectExchanges:async()=>(await U.get("/exchanges/project")).data,getTaskExchanges:async t=>(await U.get(`/exchanges/task/${t}`)).data,acceptExchange:async(t,s="")=>(await U.put(`/exchanges/${t}/accept`,{responseNote:s})).data,rejectExchange:async(t,s="")=>(await U.put(`/exchanges/${t}/reject`,{responseNote:s})).data,cancelExchange:async t=>(await U.put(`/exchanges/${t}/cancel`)).data,getExchange:async t=>(await U.get(`/exchanges/${t}`)).data},Zs=(t=null)=>{const[s,r]=u.useState([]),[a,i]=u.useState(!1),[n,l]=u.useState(null),o=u.useCallback(async()=>{i(!0),l(null);try{const m=await We.getUserExchanges(),f=m.data||m;r(Array.isArray(f)?f:[])}catch(m){l(m.response?.data?.message||m.message),console.error("Failed to fetch exchanges:",m)}finally{i(!1)}},[]),d=async m=>{i(!0);try{const f=await We.createExchange(m),j=f.data||f;return r(N=>[...Array.isArray(N)?N:[],j]),j}catch(f){throw l(f.response?.data?.message||f.message),f}finally{i(!1)}},c=async(m,f="")=>{try{const j=await We.acceptExchange(m,f),N=j.data||j;return r(C=>(Array.isArray(C)?C:[]).map(h=>h.id===m?N:h)),N}catch(j){throw l(j.response?.data?.message||j.message),j}},v=async(m,f="")=>{try{const j=await We.rejectExchange(m,f),N=j.data||j;return r(C=>(Array.isArray(C)?C:[]).map(h=>h.id===m?N:h)),N}catch(j){throw l(j.response?.data?.message||j.message),j}},g=async m=>{try{const f=await We.cancelExchange(m),j=f.data||f;return r(N=>(Array.isArray(N)?N:[]).map(C=>C.id===m?j:C)),j}catch(f){throw l(f.response?.data?.message||f.message),f}},p=async(m,f,j="")=>{if(f==="ACCEPTED")return await c(m,j);if(f==="REJECTED")return await v(m,j);if(f==="CANCELLED")return await g(m)},x=m=>s.filter(f=>f.receiverId===m),y=m=>s.filter(f=>f.requesterId===m),b=m=>s.filter(f=>f.receiverId===m&&f.status==="PENDING");return u.useEffect(()=>{o()},[o]),{exchanges:s,loading:a,error:n,fetchExchanges:o,requestExchange:d,acceptExchange:c,rejectExchange:v,cancelExchange:g,respondToExchange:p,getIncomingExchanges:x,getOutgoingExchanges:y,getPendingExchanges:b}},ds=(t=null)=>{const[s,r]=u.useState([]),[a,i]=u.useState(!1),[n,l]=u.useState(null),o=u.useCallback(async()=>{if(t){i(!0),l(null);try{const y=await ie.getProjectTasks(t),b=y.data||y;r(Array.isArray(b)?b:[])}catch(y){l(y.response?.data?.message||y.message),console.error("Failed to fetch tasks:",y)}finally{i(!1)}}},[t]),d=async y=>{i(!0);try{const b=await ie.createTask({...y,projectId:t}),m=b.data||b;return r(f=>[...Array.isArray(f)?f:[],m]),m}catch(b){throw l(b.response?.data?.message||b.message),b}finally{i(!1)}},c=async(y,b)=>{const m=Array.isArray(s)?s:[],f=m.map(j=>j.id===y?{...j,...b}:j);r(f),i(!0);try{const j=await ie.updateTask(y,b),N=j.data||j;return r(C=>(Array.isArray(C)?C:[]).map(h=>h.id===y?N:h)),N}catch(j){throw r(m),l(j.response?.data?.message||j.message),j}finally{i(!1)}},v=async y=>{i(!0);try{await ie.deleteTask(y),r(b=>(Array.isArray(b)?b:[]).filter(m=>m.id!==y))}catch(b){throw l(b.response?.data?.message||b.message),b}finally{i(!1)}},g=async(y,b,m=null)=>{const f=Array.isArray(s)?s:[],j=f.map(N=>N.id===y?{...N,status:b,position:m||N.position}:N);r(j);try{const N=await ie.moveTask(y,{status:b,position:m}),C=N.data||N;return r(h=>(Array.isArray(h)?h:[]).map(w=>w.id===y?C:w)),C}catch(N){throw r(f),l(N.response?.data?.message||N.message),N}},p=async(y,b)=>{try{const m=await ie.assignTask(y,b),f=m.data||m;return r(j=>(Array.isArray(j)?j:[]).map(N=>N.id===y?f:N)),f}catch(m){throw l(m.response?.data?.message||m.message),m}},x=async y=>{const m=(Array.isArray(s)?s:[]).find(j=>j.id===y);if(!m)return;const f=m.status==="COMPLETED"?"PENDING":m.status==="PENDING"?"DONE":"COMPLETED";await g(y,f)};return u.useEffect(()=>{t&&o()},[t,o]),{tasks:s,loading:a,error:n,fetchTasks:o,createTask:d,updateTask:c,deleteTask:v,updateTaskStatus:g,assignTask:p,toggleComplete:x}},er=({user:t,onLogout:s,onNavigateToSettings:r})=>{const[a,i]=u.useState(!1),n=u.useRef(null),{isDark:l}=J();u.useEffect(()=>{const c=v=>{n.current&&!n.current.contains(v.target)&&i(!1)};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[]);const o=c=>{switch(c){case"ADMIN":return"bg-red-100 text-red-800";case"MODERATOR":return"bg-yellow-100 text-yellow-800";case"MANAGER":return"bg-green-100 text-green-800";case"USER":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},d=c=>{switch(c){case"ADMIN":return"ðŸ§‘â€ðŸ’»";case"MODERATOR":return"ðŸ›¡ï¸";case"MANAGER":return"ðŸ‘¨â€ðŸ’¼";case"USER":return"ðŸ‘¤";default:return"ðŸ‘¤"}};return t?e.jsx("header",{className:`${l?"bg-gray-900 border-gray-700":"bg-white border-gray-200"} border-b h-16 sticky top-0 z-50 transition-colors duration-200`,children:e.jsxs("div",{className:"flex items-center justify-between h-full px-6",children:[e.jsx("div",{className:"flex items-center gap-8",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),e.jsx("span",{className:`text-xl font-bold ${l?"text-white":"text-gray-900"}`,children:"TaskForge"})]})}),e.jsx("div",{className:"hidden lg:flex flex-1 max-w-md mx-8",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:`h-4 w-4 ${l?"text-gray-500":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",placeholder:"Search anything...",className:`block w-full pl-10 pr-3 py-2 border ${l?"border-gray-600 bg-gray-800 text-white placeholder-gray-400 focus:ring-blue-400":"border-gray-200 bg-gray-50 text-gray-900 placeholder-gray-500 focus:ring-blue-500"} rounded-lg text-sm focus:outline-none focus:ring-2 focus:border-transparent transition-colors`})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:`lg:hidden p-2 ${l?"text-gray-400 hover:text-gray-200 hover:bg-gray-800":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"} rounded-lg transition-colors`,children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsxs("div",{className:"relative",ref:n,children:[e.jsxs("button",{onClick:()=>i(!a),className:`flex items-center gap-2 p-1 ${l?"hover:bg-gray-800":"hover:bg-gray-50"} rounded-lg transition-colors`,children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-medium text-sm",children:t?.username?.charAt(0)?.toUpperCase()||"U"})}),e.jsxs("div",{className:"hidden sm:block text-left",children:[e.jsx("div",{className:`text-sm font-medium ${l?"text-gray-100":"text-gray-900"}`,children:t?.username||"User"}),e.jsx("div",{className:`text-xs ${l?"text-gray-400":"text-gray-500"}`,children:t?.role||"USER"})]}),e.jsx("svg",{className:`w-4 h-4 ${l?"text-gray-500":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a&&e.jsxs("div",{className:`absolute right-0 mt-2 w-64 ${l?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow-lg border py-2 z-10`,children:[e.jsx("div",{className:`px-4 py-3 border-b ${l?"border-gray-700":"border-gray-100"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-medium",children:t?.username?.charAt(0)?.toUpperCase()||"U"})}),e.jsxs("div",{children:[e.jsx("div",{className:`font-medium ${l?"text-gray-100":"text-gray-900"}`,children:t?.name||t?.username}),e.jsx("div",{className:`text-sm ${l?"text-gray-400":"text-gray-500"}`,children:t?.email}),e.jsxs("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium mt-1 ${o(t?.role)}`,children:[d(t?.role)," ",t?.role||"USER"]})]})]})}),e.jsxs("div",{className:"py-2",children:[e.jsxs("button",{onClick:()=>{r&&r(),i(!1)},className:`w-full text-left px-4 py-2 text-sm ${l?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-50"} flex items-center gap-3`,children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Preferences"]}),e.jsx("div",{className:`border-t ${l?"border-gray-700":"border-gray-100"} my-2`}),e.jsxs("button",{onClick:s,className:`w-full text-left px-4 py-2 text-sm ${l?"text-red-400 hover:bg-gray-700":"text-red-700 hover:bg-red-50"} flex items-center gap-3`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})]})]})]})]})]})}):e.jsx("header",{className:"bg-white border-b border-gray-200 h-16",children:e.jsxs("div",{className:"flex items-center justify-between h-full px-6",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"TaskForge"})}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("div",{className:"animate-pulse w-8 h-8 bg-gray-200 rounded-full"})})]})})},tr=({user:t,activeView:s,onViewChange:r})=>{const{isDark:a}=J(),n=(()=>{const l=[{id:"dashboard",label:"Dashboard",icon:e.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v4H8V5z"})]}),path:"/dashboard"}];switch(t.role){case"USER":return[...l,{id:"my-tasks",label:"My Tasks",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),path:"/tasks"},{id:"exchanges",label:"Task Exchanges",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),path:"/exchanges"},{id:"projects",label:"My Projects",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14-1V7a2 2 0 00-2-2H7a2 2 0 00-2 2v3m14 0v7a2 2 0 01-2 2H7a2 2 0 01-2-2v-7m14 0H5"})}),path:"/projects"}];case"MANAGER":return[...l,{id:"projects",label:"Project Management",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14-1V7a2 2 0 00-2-2H7a2 2 0 00-2 2v3m14 0v7a2 2 0 01-2 2H7a2 2 0 01-2-2v-7m14 0H5"})}),path:"/projects"},{id:"team",label:"Team Overview",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),path:"/team"},{id:"tasks",label:"Task Management",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),path:"/tasks"},{id:"approvals",label:"Task Approvals",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),path:"/approvals"},{id:"exchanges",label:"Exchange Monitor",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),path:"/exchanges"}];case"MODERATOR":return[...l,{id:"monitoring",label:"Activity Monitor",icon:e.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),path:"/monitoring"},{id:"flagged",label:"Flagged Content",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 2H21l-3 6 3 6h-8.5l-1-2H5a2 2 0 00-2 2zm9-13.5V9"})}),path:"/flagged"},{id:"exchanges",label:"Exchange Oversight",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),path:"/exchanges"},{id:"reports",label:"Reports",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),path:"/reports"}];case"ADMIN":return[...l,{id:"users",label:"User Management",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),path:"/users"},{id:"system",label:"System Config",icon:e.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),path:"/system"},{id:"analytics",label:"System Analytics",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),path:"/analytics"},{id:"logs",label:"System Logs",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),path:"/logs"}];default:return l}})();return e.jsx("aside",{className:`w-64 ${a?"bg-gray-900":"bg-white"} min-h-screen flex flex-col transition-colors duration-200`,children:e.jsx("div",{className:"flex-1 p-4",children:e.jsx("nav",{className:"space-y-1",children:n.map(l=>e.jsxs("button",{onClick:()=>r(l.id),className:`w-full flex items-center gap-3 px-3 py-3 text-left rounded-lg transition-all duration-200 ${s===l.id?`${a?"bg-blue-900 text-blue-100":"bg-blue-50 text-blue-700"} font-medium shadow-sm transform scale-[1.02]`:`${a?"text-gray-300 hover:bg-gray-800 hover:text-white":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"} hover:scale-[1.01]`}`,title:`Navigate to ${l.label}`,children:[e.jsx("span",{className:`transition-colors ${s===l.id?a?"text-blue-400":"text-blue-600":a?"text-gray-400":"text-gray-500"}`,children:l.icon}),e.jsx("span",{className:"text-sm font-medium",children:l.label})]},l.id))})})})},S=({children:t,variant:s="primary",size:r="md",className:a="",disabled:i=!1,loading:n=!1,...l})=>{const{isDark:o}=J(),d="inline-flex items-center justify-center font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",c={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:o?"bg-gray-700 text-gray-200 hover:bg-gray-600 focus:ring-gray-500":"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:o?"border border-gray-600 bg-gray-800 text-gray-300 hover:bg-gray-700 focus:ring-blue-500":"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500"},v={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return e.jsxs("button",{className:`${d} ${c[s]} ${v[r]} ${a}`,disabled:i||n,...l,children:[n&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t]})},M=({children:t,className:s="",...r})=>{const{isDark:a}=J();return e.jsx("div",{className:`${a?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow-md border transition-colors duration-200 ${s}`,...r,children:t})},_=({children:t,variant:s="default",size:r="md",className:a=""})=>{const{isDark:i}=J(),n="inline-flex items-center font-medium rounded-full",l={default:i?"bg-gray-700 text-gray-200":"bg-gray-100 text-gray-800",primary:i?"bg-blue-900 text-blue-200":"bg-blue-100 text-blue-800",success:i?"bg-green-900 text-green-200":"bg-green-100 text-green-800",warning:i?"bg-yellow-900 text-yellow-200":"bg-yellow-100 text-yellow-800",danger:i?"bg-red-900 text-red-200":"bg-red-100 text-red-800"},o={sm:"px-2 py-1 text-xs",md:"px-2.5 py-1.5 text-sm",lg:"px-3 py-2 text-base"};return e.jsx("span",{className:`${n} ${l[s]} ${o[r]} ${a}`,children:t})},sr=({label:t,error:s,className:r="",type:a="text",...i})=>{const{isDark:n}=J();return e.jsxs("div",{className:"space-y-1",children:[t&&e.jsx("label",{className:`block text-sm font-medium ${n?"text-gray-300":"text-gray-700"}`,children:t}),e.jsx("input",{type:a,className:`block w-full rounded-md ${n?"border-gray-600 bg-gray-800 text-white":"border-gray-300 bg-white text-gray-900"} shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm ${s?"border-red-300 focus:border-red-500 focus:ring-red-500":""} ${r}`,...i}),s&&e.jsx("p",{className:"text-sm text-red-600",children:s})]})},Ne=({children:t,className:s="",...r})=>e.jsx("div",{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 ${s}`,...r,children:t}),rr=()=>{const{toggleTheme:t,isDark:s}=J();return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:t,className:`relative inline-flex h-10 w-20 items-center rounded-full transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${s?"bg-blue-600":"bg-gray-400"}`,"aria-label":"Toggle theme",children:e.jsx("span",{className:`inline-flex h-8 w-8 items-center justify-center transform rounded-full bg-white shadow-lg transition duration-300 ${s?"translate-x-11":"translate-x-1"}`,children:s?e.jsx("svg",{className:"w-5 h-5 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):e.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})}),e.jsx("span",{className:`text-sm font-medium ${s?"text-white":"text-gray-700"}`,children:s?"Dark Mode":"Light Mode"})]})},ar=({user:t,children:s,onLogout:r})=>{const[a,i]=u.useState("dashboard"),[n,l]=u.useState(!0),{isDark:o}=J(),d=g=>{i(g),console.log("Navigating to:",g)},c=g=>({dashboard:"Main Overview",tasks:"Task Management",projects:"Project Management",team:"Team Collaboration",exchanges:"Task Exchange",calendar:"Schedule View",reports:"Analytics",settings:"Configuration",profile:"User Profile"})[g]||"Current Section",v=()=>{switch(a){case"dashboard":return s;case"my-tasks":case"tasks":return e.jsxs("div",{className:`${o?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow-sm border p-6`,children:[e.jsx("h2",{className:`text-2xl font-bold ${o?"text-gray-100":"text-gray-900"} mb-4`,children:"Task Management"}),e.jsx("p",{className:`${o?"text-gray-300":"text-gray-600"}`,children:"Task management interface coming soon..."})]});case"projects":return e.jsxs("div",{className:`${o?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow-sm border p-6`,children:[e.jsx("h2",{className:`text-2xl font-bold ${o?"text-gray-100":"text-gray-900"} mb-4`,children:"Projects"}),e.jsx("p",{className:`${o?"text-gray-300":"text-gray-600"}`,children:"Project management interface coming soon..."})]});case"exchanges":return e.jsxs("div",{className:`${o?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow-sm border p-6`,children:[e.jsx("h2",{className:`text-2xl font-bold ${o?"text-gray-100":"text-gray-900"} mb-4`,children:"Task Exchanges"}),e.jsx("p",{className:`${o?"text-gray-300":"text-gray-600"}`,children:"Task exchange interface coming soon..."})]});case"team":return e.jsxs("div",{className:`${o?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow-sm border p-6`,children:[e.jsx("h2",{className:`text-2xl font-bold ${o?"text-gray-100":"text-gray-900"} mb-4`,children:"Team Overview"}),e.jsx("p",{className:`${o?"text-gray-300":"text-gray-600"}`,children:"Team management interface coming soon..."})]});case"approvals":return e.jsxs("div",{className:`${o?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow-sm border p-6`,children:[e.jsx("h2",{className:`text-2xl font-bold ${o?"text-gray-100":"text-gray-900"} mb-4`,children:"Task Approvals"}),e.jsx("p",{className:`${o?"text-gray-300":"text-gray-600"}`,children:"Task approval interface coming soon..."})]});case"monitoring":return e.jsxs("div",{className:`${o?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow-sm border p-6`,children:[e.jsx("h2",{className:`text-2xl font-bold ${o?"text-gray-100":"text-gray-900"} mb-4`,children:"Activity Monitor"}),e.jsx("p",{className:`${o?"text-gray-300":"text-gray-600"}`,children:"Activity monitoring interface coming soon..."})]});case"flagged":return e.jsxs("div",{className:`${o?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow-sm border p-6`,children:[e.jsx("h2",{className:`text-2xl font-bold ${o?"text-gray-100":"text-gray-900"} mb-4`,children:"Flagged Content"}),e.jsx("p",{className:`${o?"text-gray-300":"text-gray-600"}`,children:"Flagged content interface coming soon..."})]});case"reports":return e.jsxs("div",{className:`${o?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow-sm border p-6`,children:[e.jsx("h2",{className:`text-2xl font-bold ${o?"text-gray-100":"text-gray-900"} mb-4`,children:"Reports"}),e.jsx("p",{className:`${o?"text-gray-300":"text-gray-600"}`,children:"Reports interface coming soon..."})]});case"users":return e.jsxs("div",{className:`${o?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow-sm border p-6`,children:[e.jsx("h2",{className:`text-2xl font-bold ${o?"text-gray-100":"text-gray-900"} mb-4`,children:"User Management"}),e.jsx("p",{className:`${o?"text-gray-300":"text-gray-600"}`,children:"User management interface coming soon..."})]});case"system":return e.jsxs("div",{className:`${o?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow-sm border p-6`,children:[e.jsx("h2",{className:`text-2xl font-bold ${o?"text-gray-100":"text-gray-900"} mb-4`,children:"System Configuration"}),e.jsx("p",{className:`${o?"text-gray-300":"text-gray-600"}`,children:"System configuration interface coming soon..."})]});case"analytics":return e.jsxs("div",{className:`${o?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow-sm border p-6`,children:[e.jsx("h2",{className:`text-2xl font-bold ${o?"text-gray-100":"text-gray-900"} mb-4`,children:"System Analytics"}),e.jsx("p",{className:`${o?"text-gray-300":"text-gray-600"}`,children:"Analytics interface coming soon..."})]});case"logs":return e.jsxs("div",{className:`${o?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow-sm border p-6`,children:[e.jsx("h2",{className:`text-2xl font-bold ${o?"text-gray-100":"text-gray-900"} mb-4`,children:"System Logs"}),e.jsx("p",{className:`${o?"text-gray-300":"text-gray-600"}`,children:"System logs interface coming soon..."})]});case"settings":return e.jsxs("div",{className:`${o?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow-sm border p-6`,children:[e.jsx("h2",{className:`text-2xl font-bold ${o?"text-gray-100":"text-gray-900"} mb-6`,children:"Settings & Preferences"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:`text-lg font-semibold ${o?"text-gray-200":"text-gray-800"} mb-4`,children:"Theme"}),e.jsx("div",{className:`${o?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"} border rounded-lg p-6`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`font-medium ${o?"text-gray-100":"text-gray-900"} mb-2`,children:"Appearance"}),e.jsx("p",{className:`text-sm ${o?"text-gray-400":"text-gray-600"} mb-4`,children:"Choose your preferred theme for the interface"})]}),e.jsx(rr,{})]})})]})]});default:return s}};return e.jsxs("div",{className:`min-h-screen ${o?"bg-gray-900":"bg-gray-100"} transition-colors duration-200`,children:[e.jsx(er,{user:t,onLogout:r,onNavigateToSettings:()=>d("settings")}),e.jsxs("div",{className:"flex",children:[n&&e.jsx(tr,{user:t,activeView:a,onViewChange:d}),e.jsxs("main",{className:"flex-1 ml-0",children:[e.jsx("div",{className:"lg:hidden p-4",children:e.jsx("button",{onClick:()=>l(!n),className:"p-2 bg-white rounded-md shadow-sm border",children:n?"â†":"â†’"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:`mb-4 ${o?"bg-blue-900 border-blue-800":"bg-blue-50 border-blue-200"} border rounded-lg p-3`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`${o?"text-blue-300":"text-blue-600"} font-medium text-sm`,children:"Active View:"}),e.jsx("span",{className:`${o?"text-blue-100":"text-blue-800"} font-bold capitalize`,children:a.replace("-"," ")}),e.jsx("span",{className:`ml-2 px-2 py-1 ${o?"bg-blue-800 text-blue-200":"bg-blue-100 text-blue-700"} text-xs rounded-full font-medium`,children:c(a)}),a!=="dashboard"&&e.jsx("button",{onClick:()=>d("dashboard"),className:`ml-auto ${o?"text-blue-300 hover:text-blue-100":"text-blue-600 hover:text-blue-800"} text-sm underline`,children:"â† Back to Dashboard"})]})}),v()]})]})]})]})},nr=({user:t})=>{const[s,r]=u.useState("overview");if(!t)return e.jsx(Ne,{className:"py-8",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading dashboard..."})]})});const a={totalUsers:156,totalProjects:25,activeUsers:89,systemUptime:"99.9%",storageUsed:"2.3 GB",apiCalls:12456},i={ADMIN:3,MODERATOR:5,MANAGER:12,USER:136},n=[{id:"u1",username:"john_new",email:"john@company.com",role:"USER",status:"active",lastLogin:"2025-09-23 14:30",createdAt:"2025-09-20"},{id:"u2",username:"jane_manager",email:"jane@company.com",role:"MANAGER",status:"active",lastLogin:"2025-09-23 13:45",createdAt:"2025-09-18"}],l=[{id:"a1",type:"performance",message:"Database query performance degraded by 15%",severity:"warning",timestamp:"2025-09-23 12:00"},{id:"a2",type:"security",message:"Multiple failed login attempts detected",severity:"high",timestamp:"2025-09-23 10:30"}],o=(c,v)=>{console.log(`Changing user ${c} role to ${v}`)},d=c=>{console.log("Deactivating user:",c)};return e.jsx(Ne,{children:e.jsxs("div",{className:"py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Administration ðŸ§‘â€ðŸ’»"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(_,{variant:"danger",children:"ADMIN"}),e.jsxs("span",{className:"text-gray-600",children:["System Administrator - ",t.username]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{variant:s==="overview"?"primary":"secondary",onClick:()=>r("overview"),children:"Overview"}),e.jsx(S,{variant:s==="users"?"primary":"secondary",onClick:()=>r("users"),children:"User Management"}),e.jsx(S,{variant:s==="system"?"primary":"secondary",onClick:()=>r("system"),children:"System Config"}),e.jsx(S,{variant:s==="analytics"?"primary":"secondary",onClick:()=>r("analytics"),children:"Analytics"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(M,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.totalUsers}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Users"}),e.jsxs("div",{className:"text-xs text-green-600",children:[a.activeUsers," active"]})]})}),e.jsx(M,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.totalProjects}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Projects"})]})}),e.jsx(M,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:a.systemUptime}),e.jsx("div",{className:"text-sm text-gray-600",children:"System Uptime"})]})}),e.jsx(M,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:a.apiCalls.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600",children:"API Calls Today"})]})})]}),s==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{title:"System Alerts",subtitle:"Critical system notifications",children:e.jsx("div",{className:"space-y-3",children:l.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx("div",{className:"text-3xl mb-2",children:"âœ…"}),e.jsx("p",{children:"No system alerts"})]}):l.map(c=>e.jsx("div",{className:`p-3 rounded-lg border ${c.severity==="high"?"border-red-200 bg-red-50":c.severity==="warning"?"border-yellow-200 bg-yellow-50":"border-gray-200 bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(_,{variant:c.severity==="high"?"danger":c.severity==="warning"?"warning":"default",children:c.severity.toUpperCase()}),e.jsx("span",{className:"text-sm text-gray-600",children:c.type})]}),e.jsx("p",{className:"font-medium",children:c.message}),e.jsx("p",{className:"text-sm text-gray-500",children:c.timestamp})]}),e.jsx(S,{size:"sm",variant:"secondary",children:"Resolve"})]})},c.id))})}),e.jsx(M,{title:"User Role Distribution",subtitle:"Current user roles in the system",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(i).map(([c,v])=>e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("div",{className:`text-2xl font-bold ${c==="ADMIN"?"text-red-600":c==="MODERATOR"?"text-yellow-600":c==="MANAGER"?"text-green-600":"text-blue-600"}`,children:v}),e.jsx("div",{className:"text-sm text-gray-600",children:c})]},c))})}),e.jsx(M,{title:"System Performance",subtitle:"Current system metrics",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Storage Usage"}),e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsxs("span",{children:["Used: ",a.storageUsed]}),e.jsx("span",{children:"23%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"23%"}})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"CPU Usage"}),e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Current"}),e.jsx("span",{children:"45%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"45%"}})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Memory Usage"}),e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Current"}),e.jsx("span",{children:"67%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:"67%"}})})]})]})})]}),s==="users"&&e.jsx("div",{className:"space-y-6",children:e.jsx(M,{title:"User Management",subtitle:"Manage system users and their roles",children:e.jsx("div",{className:"space-y-4",children:n.map(c=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"font-medium text-blue-600",children:c.username.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:c.username}),e.jsx("p",{className:"text-sm text-gray-600",children:c.email})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsx(_,{variant:c.role==="ADMIN"?"danger":c.role==="MODERATOR"?"warning":c.role==="MANAGER"?"success":"primary",children:c.role}),e.jsxs("span",{children:["Last login: ",c.lastLogin]}),e.jsxs("span",{children:["Joined: ",c.createdAt]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"px-3 py-1 border rounded text-sm",defaultValue:c.role,onChange:v=>o(c.id,v.target.value),children:[e.jsx("option",{value:"USER",children:"User"}),e.jsx("option",{value:"MANAGER",children:"Manager"}),e.jsx("option",{value:"MODERATOR",children:"Moderator"}),e.jsx("option",{value:"ADMIN",children:"Admin"})]}),e.jsx(S,{size:"sm",variant:"danger",onClick:()=>d(c.id),children:"Deactivate"})]})]},c.id))})})}),s==="system"&&e.jsx(M,{title:"System Configuration",subtitle:"Configure system-wide settings",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"API Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"API Rate Limiting"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"API Versioning"}),e.jsxs("select",{className:"px-3 py-1 border rounded text-sm",children:[e.jsx("option",{children:"v1.0"}),e.jsx("option",{children:"v1.1"}),e.jsx("option",{children:"v2.0 (beta)"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Security Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Two-Factor Authentication"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Session Timeout (hours)"}),e.jsx("input",{type:"number",className:"w-20 px-2 py-1 border rounded text-sm",defaultValue:"24",min:"1",max:"168"})]})]})]})]}),e.jsx("div",{className:"pt-6 border-t",children:e.jsx(S,{variant:"primary",children:"Save Configuration"})})]})}),s==="analytics"&&e.jsx(M,{title:"System Analytics",subtitle:"Comprehensive system usage analytics",children:e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“Š"}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"Advanced Analytics Dashboard"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Detailed analytics and reporting features would be implemented here with charts and graphs"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("div",{className:"font-medium",children:"User Growth"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Monthly user registration trends"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("div",{className:"font-medium",children:"Project Analytics"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Project completion rates and timelines"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("div",{className:"font-medium",children:"System Performance"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Server metrics and optimization insights"})]})]})]})})]})})};function ir(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return u.useMemo(()=>a=>{s.forEach(i=>i(a))},s)}const jt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function qe(t){const s=Object.prototype.toString.call(t);return s==="[object Window]"||s==="[object global]"}function Lt(t){return"nodeType"in t}function Z(t){var s,r;return t?qe(t)?t:Lt(t)&&(s=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?s:window:window}function It(t){const{Document:s}=Z(t);return t instanceof s}function it(t){return qe(t)?!1:t instanceof Z(t).HTMLElement}function us(t){return t instanceof Z(t).SVGElement}function Ve(t){return t?qe(t)?t.document:Lt(t)?It(t)?t:it(t)||us(t)?t.ownerDocument:document:document:document}const me=jt?u.useLayoutEffect:u.useEffect;function Nt(t){const s=u.useRef(t);return me(()=>{s.current=t}),u.useCallback(function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return s.current==null?void 0:s.current(...a)},[])}function lr(){const t=u.useRef(null),s=u.useCallback((a,i)=>{t.current=setInterval(a,i)},[]),r=u.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[s,r]}function rt(t,s){s===void 0&&(s=[t]);const r=u.useRef(t);return me(()=>{r.current!==t&&(r.current=t)},s),r}function lt(t,s){const r=u.useRef();return u.useMemo(()=>{const a=t(r.current);return r.current=a,a},[...s])}function ht(t){const s=Nt(t),r=u.useRef(null),a=u.useCallback(i=>{i!==r.current&&s?.(i,r.current),r.current=i},[]);return[r,a]}function pt(t){const s=u.useRef();return u.useEffect(()=>{s.current=t},[t]),s.current}let At={};function ot(t,s){return u.useMemo(()=>{if(s)return s;const r=At[t]==null?0:At[t]+1;return At[t]=r,t+"-"+r},[t,s])}function xs(t){return function(s){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return a.reduce((n,l)=>{const o=Object.entries(l);for(const[d,c]of o){const v=n[d];v!=null&&(n[d]=v+t*c)}return n},{...s})}}const He=xs(1),at=xs(-1);function or(t){return"clientX"in t&&"clientY"in t}function wt(t){if(!t)return!1;const{KeyboardEvent:s}=Z(t.target);return s&&t instanceof s}function cr(t){if(!t)return!1;const{TouchEvent:s}=Z(t.target);return s&&t instanceof s}function ft(t){if(cr(t)){if(t.touches&&t.touches.length){const{clientX:s,clientY:r}=t.touches[0];return{x:s,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:s,clientY:r}=t.changedTouches[0];return{x:s,y:r}}}return or(t)?{x:t.clientX,y:t.clientY}:null}const Le=Object.freeze({Translate:{toString(t){if(!t)return;const{x:s,y:r}=t;return"translate3d("+(s?Math.round(s):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:s,scaleY:r}=t;return"scaleX("+s+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[Le.Translate.toString(t),Le.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:s,duration:r,easing:a}=t;return s+" "+r+"ms "+a}}}),Kt="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function dr(t){return t.matches(Kt)?t:t.querySelector(Kt)}const ur={display:"none"};function xr(t){let{id:s,value:r}=t;return G.createElement("div",{id:s,style:ur},r)}function mr(t){let{id:s,announcement:r,ariaLiveType:a="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return G.createElement("div",{id:s,style:i,role:"status","aria-live":a,"aria-atomic":!0},r)}function gr(){const[t,s]=u.useState("");return{announce:u.useCallback(a=>{a!=null&&s(a)},[]),announcement:t}}const ms=u.createContext(null);function hr(t){const s=u.useContext(ms);u.useEffect(()=>{if(!s)throw new Error("useDndMonitor must be used within a children of <DndContext>");return s(t)},[t,s])}function pr(){const[t]=u.useState(()=>new Set),s=u.useCallback(a=>(t.add(a),()=>t.delete(a)),[t]);return[u.useCallback(a=>{let{type:i,event:n}=a;t.forEach(l=>{var o;return(o=l[i])==null?void 0:o.call(l,n)})},[t]),s]}const fr={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},yr={onDragStart(t){let{active:s}=t;return"Picked up draggable item "+s.id+"."},onDragOver(t){let{active:s,over:r}=t;return r?"Draggable item "+s.id+" was moved over droppable area "+r.id+".":"Draggable item "+s.id+" is no longer over a droppable area."},onDragEnd(t){let{active:s,over:r}=t;return r?"Draggable item "+s.id+" was dropped over droppable area "+r.id:"Draggable item "+s.id+" was dropped."},onDragCancel(t){let{active:s}=t;return"Dragging was cancelled. Draggable item "+s.id+" was dropped."}};function br(t){let{announcements:s=yr,container:r,hiddenTextDescribedById:a,screenReaderInstructions:i=fr}=t;const{announce:n,announcement:l}=gr(),o=ot("DndLiveRegion"),[d,c]=u.useState(!1);if(u.useEffect(()=>{c(!0)},[]),hr(u.useMemo(()=>({onDragStart(g){let{active:p}=g;n(s.onDragStart({active:p}))},onDragMove(g){let{active:p,over:x}=g;s.onDragMove&&n(s.onDragMove({active:p,over:x}))},onDragOver(g){let{active:p,over:x}=g;n(s.onDragOver({active:p,over:x}))},onDragEnd(g){let{active:p,over:x}=g;n(s.onDragEnd({active:p,over:x}))},onDragCancel(g){let{active:p,over:x}=g;n(s.onDragCancel({active:p,over:x}))}}),[n,s])),!d)return null;const v=G.createElement(G.Fragment,null,G.createElement(xr,{id:a,value:i.draggable}),G.createElement(mr,{id:o,announcement:l}));return r?Ze.createPortal(v,r):v}var H;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(H||(H={}));function yt(){}function Yt(t,s){return u.useMemo(()=>({sensor:t,options:s??{}}),[t,s])}function vr(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return u.useMemo(()=>[...s].filter(a=>a!=null),[...s])}const ge=Object.freeze({x:0,y:0});function jr(t,s){return Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))}function Nr(t,s){const r=ft(t);if(!r)return"0 0";const a={x:(r.x-s.left)/s.width*100,y:(r.y-s.top)/s.height*100};return a.x+"% "+a.y+"%"}function wr(t,s){let{data:{value:r}}=t,{data:{value:a}}=s;return r-a}function kr(t,s){let{data:{value:r}}=t,{data:{value:a}}=s;return a-r}function Xt(t){let{left:s,top:r,height:a,width:i}=t;return[{x:s,y:r},{x:s+i,y:r},{x:s,y:r+a},{x:s+i,y:r+a}]}function gs(t,s){if(!t||t.length===0)return null;const[r]=t;return r[s]}const hs=t=>{let{collisionRect:s,droppableRects:r,droppableContainers:a}=t;const i=Xt(s),n=[];for(const l of a){const{id:o}=l,d=r.get(o);if(d){const c=Xt(d),v=i.reduce((p,x,y)=>p+jr(c[y],x),0),g=Number((v/4).toFixed(4));n.push({id:o,data:{droppableContainer:l,value:g}})}}return n.sort(wr)};function Cr(t,s){const r=Math.max(s.top,t.top),a=Math.max(s.left,t.left),i=Math.min(s.left+s.width,t.left+t.width),n=Math.min(s.top+s.height,t.top+t.height),l=i-a,o=n-r;if(a<i&&r<n){const d=s.width*s.height,c=t.width*t.height,v=l*o,g=v/(d+c-v);return Number(g.toFixed(4))}return 0}const Dr=t=>{let{collisionRect:s,droppableRects:r,droppableContainers:a}=t;const i=[];for(const n of a){const{id:l}=n,o=r.get(l);if(o){const d=Cr(o,s);d>0&&i.push({id:l,data:{droppableContainer:n,value:d}})}}return i.sort(kr)};function Er(t,s,r){return{...t,scaleX:s&&r?s.width/r.width:1,scaleY:s&&r?s.height/r.height:1}}function ps(t,s){return t&&s?{x:t.left-s.left,y:t.top-s.top}:ge}function Tr(t){return function(r){for(var a=arguments.length,i=new Array(a>1?a-1:0),n=1;n<a;n++)i[n-1]=arguments[n];return i.reduce((l,o)=>({...l,top:l.top+t*o.y,bottom:l.bottom+t*o.y,left:l.left+t*o.x,right:l.right+t*o.x}),{...r})}}const Ar=Tr(1);function fs(t){if(t.startsWith("matrix3d(")){const s=t.slice(9,-1).split(/, /);return{x:+s[12],y:+s[13],scaleX:+s[0],scaleY:+s[5]}}else if(t.startsWith("matrix(")){const s=t.slice(7,-1).split(/, /);return{x:+s[4],y:+s[5],scaleX:+s[0],scaleY:+s[3]}}return null}function Mr(t,s,r){const a=fs(s);if(!a)return t;const{scaleX:i,scaleY:n,x:l,y:o}=a,d=t.left-l-(1-i)*parseFloat(r),c=t.top-o-(1-n)*parseFloat(r.slice(r.indexOf(" ")+1)),v=i?t.width/i:t.width,g=n?t.height/n:t.height;return{width:v,height:g,top:c,right:d+v,bottom:c+g,left:d}}const Sr={ignoreTransform:!1};function _e(t,s){s===void 0&&(s=Sr);let r=t.getBoundingClientRect();if(s.ignoreTransform){const{transform:c,transformOrigin:v}=Z(t).getComputedStyle(t);c&&(r=Mr(r,c,v))}const{top:a,left:i,width:n,height:l,bottom:o,right:d}=r;return{top:a,left:i,width:n,height:l,bottom:o,right:d}}function Jt(t){return _e(t,{ignoreTransform:!0})}function $r(t){const s=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:s,bottom:r,width:s,height:r}}function Rr(t,s){return s===void 0&&(s=Z(t).getComputedStyle(t)),s.position==="fixed"}function Pr(t,s){s===void 0&&(s=Z(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const n=s[i];return typeof n=="string"?r.test(n):!1})}function kt(t,s){const r=[];function a(i){if(s!=null&&r.length>=s||!i)return r;if(It(i)&&i.scrollingElement!=null&&!r.includes(i.scrollingElement))return r.push(i.scrollingElement),r;if(!it(i)||us(i)||r.includes(i))return r;const n=Z(t).getComputedStyle(i);return i!==t&&Pr(i,n)&&r.push(i),Rr(i,n)?r:a(i.parentNode)}return t?a(t):r}function ys(t){const[s]=kt(t,1);return s??null}function Mt(t){return!jt||!t?null:qe(t)?t:Lt(t)?It(t)||t===Ve(t).scrollingElement?window:it(t)?t:null:null}function bs(t){return qe(t)?t.scrollX:t.scrollLeft}function vs(t){return qe(t)?t.scrollY:t.scrollTop}function Rt(t){return{x:bs(t),y:vs(t)}}var V;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(V||(V={}));function js(t){return!jt||!t?!1:t===document.scrollingElement}function Ns(t){const s={x:0,y:0},r=js(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},a={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},i=t.scrollTop<=s.y,n=t.scrollLeft<=s.x,l=t.scrollTop>=a.y,o=t.scrollLeft>=a.x;return{isTop:i,isLeft:n,isBottom:l,isRight:o,maxScroll:a,minScroll:s}}const Or={x:.2,y:.2};function Lr(t,s,r,a,i){let{top:n,left:l,right:o,bottom:d}=r;a===void 0&&(a=10),i===void 0&&(i=Or);const{isTop:c,isBottom:v,isLeft:g,isRight:p}=Ns(t),x={x:0,y:0},y={x:0,y:0},b={height:s.height*i.y,width:s.width*i.x};return!c&&n<=s.top+b.height?(x.y=V.Backward,y.y=a*Math.abs((s.top+b.height-n)/b.height)):!v&&d>=s.bottom-b.height&&(x.y=V.Forward,y.y=a*Math.abs((s.bottom-b.height-d)/b.height)),!p&&o>=s.right-b.width?(x.x=V.Forward,y.x=a*Math.abs((s.right-b.width-o)/b.width)):!g&&l<=s.left+b.width&&(x.x=V.Backward,y.x=a*Math.abs((s.left+b.width-l)/b.width)),{direction:x,speed:y}}function Ir(t){if(t===document.scrollingElement){const{innerWidth:n,innerHeight:l}=window;return{top:0,left:0,right:n,bottom:l,width:n,height:l}}const{top:s,left:r,right:a,bottom:i}=t.getBoundingClientRect();return{top:s,left:r,right:a,bottom:i,width:t.clientWidth,height:t.clientHeight}}function ws(t){return t.reduce((s,r)=>He(s,Rt(r)),ge)}function Ur(t){return t.reduce((s,r)=>s+bs(r),0)}function zr(t){return t.reduce((s,r)=>s+vs(r),0)}function ks(t,s){if(s===void 0&&(s=_e),!t)return;const{top:r,left:a,bottom:i,right:n}=s(t);ys(t)&&(i<=0||n<=0||r>=window.innerHeight||a>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const Fr=[["x",["left","right"],Ur],["y",["top","bottom"],zr]];class Ut{constructor(s,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const a=kt(r),i=ws(a);this.rect={...s},this.width=s.width,this.height=s.height;for(const[n,l,o]of Fr)for(const d of l)Object.defineProperty(this,d,{get:()=>{const c=o(a),v=i[n]-c;return this.rect[d]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class et{constructor(s){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var a;return(a=this.target)==null?void 0:a.removeEventListener(...r)})},this.target=s}add(s,r,a){var i;(i=this.target)==null||i.addEventListener(s,r,a),this.listeners.push([s,r,a])}}function Br(t){const{EventTarget:s}=Z(t);return t instanceof s?t:Ve(t)}function St(t,s){const r=Math.abs(t.x),a=Math.abs(t.y);return typeof s=="number"?Math.sqrt(r**2+a**2)>s:"x"in s&&"y"in s?r>s.x&&a>s.y:"x"in s?r>s.x:"y"in s?a>s.y:!1}var ce;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(ce||(ce={}));function Qt(t){t.preventDefault()}function Gr(t){t.stopPropagation()}var P;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(P||(P={}));const Cs={start:[P.Space,P.Enter],cancel:[P.Esc],end:[P.Space,P.Enter,P.Tab]},Wr=(t,s)=>{let{currentCoordinates:r}=s;switch(t.code){case P.Right:return{...r,x:r.x+25};case P.Left:return{...r,x:r.x-25};case P.Down:return{...r,y:r.y+25};case P.Up:return{...r,y:r.y-25}}};class zt{constructor(s){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=s;const{event:{target:r}}=s;this.props=s,this.listeners=new et(Ve(r)),this.windowListeners=new et(Z(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ce.Resize,this.handleCancel),this.windowListeners.add(ce.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ce.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:s,onStart:r}=this.props,a=s.node.current;a&&ks(a),r(ge)}handleKeyDown(s){if(wt(s)){const{active:r,context:a,options:i}=this.props,{keyboardCodes:n=Cs,coordinateGetter:l=Wr,scrollBehavior:o="smooth"}=i,{code:d}=s;if(n.end.includes(d)){this.handleEnd(s);return}if(n.cancel.includes(d)){this.handleCancel(s);return}const{collisionRect:c}=a.current,v=c?{x:c.left,y:c.top}:ge;this.referenceCoordinates||(this.referenceCoordinates=v);const g=l(s,{active:r,context:a.current,currentCoordinates:v});if(g){const p=at(g,v),x={x:0,y:0},{scrollableAncestors:y}=a.current;for(const b of y){const m=s.code,{isTop:f,isRight:j,isLeft:N,isBottom:C,maxScroll:h,minScroll:w}=Ns(b),E=Ir(b),T={x:Math.min(m===P.Right?E.right-E.width/2:E.right,Math.max(m===P.Right?E.left:E.left+E.width/2,g.x)),y:Math.min(m===P.Down?E.bottom-E.height/2:E.bottom,Math.max(m===P.Down?E.top:E.top+E.height/2,g.y))},A=m===P.Right&&!j||m===P.Left&&!N,O=m===P.Down&&!C||m===P.Up&&!f;if(A&&T.x!==g.x){const L=b.scrollLeft+p.x,K=m===P.Right&&L<=h.x||m===P.Left&&L>=w.x;if(K&&!p.y){b.scrollTo({left:L,behavior:o});return}K?x.x=b.scrollLeft-L:x.x=m===P.Right?b.scrollLeft-h.x:b.scrollLeft-w.x,x.x&&b.scrollBy({left:-x.x,behavior:o});break}else if(O&&T.y!==g.y){const L=b.scrollTop+p.y,K=m===P.Down&&L<=h.y||m===P.Up&&L>=w.y;if(K&&!p.x){b.scrollTo({top:L,behavior:o});return}K?x.y=b.scrollTop-L:x.y=m===P.Down?b.scrollTop-h.y:b.scrollTop-w.y,x.y&&b.scrollBy({top:-x.y,behavior:o});break}}this.handleMove(s,He(at(g,this.referenceCoordinates),x))}}}handleMove(s,r){const{onMove:a}=this.props;s.preventDefault(),a(r)}handleEnd(s){const{onEnd:r}=this.props;s.preventDefault(),this.detach(),r()}handleCancel(s){const{onCancel:r}=this.props;s.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}zt.activators=[{eventName:"onKeyDown",handler:(t,s,r)=>{let{keyboardCodes:a=Cs,onActivation:i}=s,{active:n}=r;const{code:l}=t.nativeEvent;if(a.start.includes(l)){const o=n.activatorNode.current;return o&&t.target!==o?!1:(t.preventDefault(),i?.({event:t.nativeEvent}),!0)}return!1}}];function Zt(t){return!!(t&&"distance"in t)}function es(t){return!!(t&&"delay"in t)}class Ft{constructor(s,r,a){var i;a===void 0&&(a=Br(s.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=s,this.events=r;const{event:n}=s,{target:l}=n;this.props=s,this.events=r,this.document=Ve(l),this.documentListeners=new et(this.document),this.listeners=new et(a),this.windowListeners=new et(Z(l)),this.initialCoordinates=(i=ft(n))!=null?i:ge,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:s,props:{options:{activationConstraint:r,bypassActivationConstraint:a}}}=this;if(this.listeners.add(s.move.name,this.handleMove,{passive:!1}),this.listeners.add(s.end.name,this.handleEnd),s.cancel&&this.listeners.add(s.cancel.name,this.handleCancel),this.windowListeners.add(ce.Resize,this.handleCancel),this.windowListeners.add(ce.DragStart,Qt),this.windowListeners.add(ce.VisibilityChange,this.handleCancel),this.windowListeners.add(ce.ContextMenu,Qt),this.documentListeners.add(ce.Keydown,this.handleKeydown),r){if(a!=null&&a({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(es(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(Zt(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(s,r){const{active:a,onPending:i}=this.props;i(a,s,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:s}=this,{onStart:r}=this.props;s&&(this.activated=!0,this.documentListeners.add(ce.Click,Gr,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ce.SelectionChange,this.removeTextSelection),r(s))}handleMove(s){var r;const{activated:a,initialCoordinates:i,props:n}=this,{onMove:l,options:{activationConstraint:o}}=n;if(!i)return;const d=(r=ft(s))!=null?r:ge,c=at(i,d);if(!a&&o){if(Zt(o)){if(o.tolerance!=null&&St(c,o.tolerance))return this.handleCancel();if(St(c,o.distance))return this.handleStart()}if(es(o)&&St(c,o.tolerance))return this.handleCancel();this.handlePending(o,c);return}s.cancelable&&s.preventDefault(),l(d)}handleEnd(){const{onAbort:s,onEnd:r}=this.props;this.detach(),this.activated||s(this.props.active),r()}handleCancel(){const{onAbort:s,onCancel:r}=this.props;this.detach(),this.activated||s(this.props.active),r()}handleKeydown(s){s.code===P.Esc&&this.handleCancel()}removeTextSelection(){var s;(s=this.document.getSelection())==null||s.removeAllRanges()}}const Hr={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Bt extends Ft{constructor(s){const{event:r}=s,a=Ve(r.target);super(s,Hr,a)}}Bt.activators=[{eventName:"onPointerDown",handler:(t,s)=>{let{nativeEvent:r}=t,{onActivation:a}=s;return!r.isPrimary||r.button!==0?!1:(a?.({event:r}),!0)}}];const qr={move:{name:"mousemove"},end:{name:"mouseup"}};var Pt;(function(t){t[t.RightClick=2]="RightClick"})(Pt||(Pt={}));class Vr extends Ft{constructor(s){super(s,qr,Ve(s.event.target))}}Vr.activators=[{eventName:"onMouseDown",handler:(t,s)=>{let{nativeEvent:r}=t,{onActivation:a}=s;return r.button===Pt.RightClick?!1:(a?.({event:r}),!0)}}];const $t={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class _r extends Ft{constructor(s){super(s,$t)}static setup(){return window.addEventListener($t.move.name,s,{capture:!1,passive:!1}),function(){window.removeEventListener($t.move.name,s)};function s(){}}}_r.activators=[{eventName:"onTouchStart",handler:(t,s)=>{let{nativeEvent:r}=t,{onActivation:a}=s;const{touches:i}=r;return i.length>1?!1:(a?.({event:r}),!0)}}];var tt;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(tt||(tt={}));var bt;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(bt||(bt={}));function Kr(t){let{acceleration:s,activator:r=tt.Pointer,canScroll:a,draggingRect:i,enabled:n,interval:l=5,order:o=bt.TreeOrder,pointerCoordinates:d,scrollableAncestors:c,scrollableAncestorRects:v,delta:g,threshold:p}=t;const x=Xr({delta:g,disabled:!n}),[y,b]=lr(),m=u.useRef({x:0,y:0}),f=u.useRef({x:0,y:0}),j=u.useMemo(()=>{switch(r){case tt.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case tt.DraggableRect:return i}},[r,i,d]),N=u.useRef(null),C=u.useCallback(()=>{const w=N.current;if(!w)return;const E=m.current.x*f.current.x,T=m.current.y*f.current.y;w.scrollBy(E,T)},[]),h=u.useMemo(()=>o===bt.TreeOrder?[...c].reverse():c,[o,c]);u.useEffect(()=>{if(!n||!c.length||!j){b();return}for(const w of h){if(a?.(w)===!1)continue;const E=c.indexOf(w),T=v[E];if(!T)continue;const{direction:A,speed:O}=Lr(w,T,j,s,p);for(const L of["x","y"])x[L][A[L]]||(O[L]=0,A[L]=0);if(O.x>0||O.y>0){b(),N.current=w,y(C,l),m.current=O,f.current=A;return}}m.current={x:0,y:0},f.current={x:0,y:0},b()},[s,C,a,b,n,l,JSON.stringify(j),JSON.stringify(x),y,c,h,v,JSON.stringify(p)])}const Yr={x:{[V.Backward]:!1,[V.Forward]:!1},y:{[V.Backward]:!1,[V.Forward]:!1}};function Xr(t){let{delta:s,disabled:r}=t;const a=pt(s);return lt(i=>{if(r||!a||!i)return Yr;const n={x:Math.sign(s.x-a.x),y:Math.sign(s.y-a.y)};return{x:{[V.Backward]:i.x[V.Backward]||n.x===-1,[V.Forward]:i.x[V.Forward]||n.x===1},y:{[V.Backward]:i.y[V.Backward]||n.y===-1,[V.Forward]:i.y[V.Forward]||n.y===1}}},[r,s,a])}function Jr(t,s){const r=s!=null?t.get(s):void 0,a=r?r.node.current:null;return lt(i=>{var n;return s==null?null:(n=a??i)!=null?n:null},[a,s])}function Qr(t,s){return u.useMemo(()=>t.reduce((r,a)=>{const{sensor:i}=a,n=i.activators.map(l=>({eventName:l.eventName,handler:s(l.handler,a)}));return[...r,...n]},[]),[t,s])}var nt;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(nt||(nt={}));var Ot;(function(t){t.Optimized="optimized"})(Ot||(Ot={}));const ts=new Map;function Zr(t,s){let{dragging:r,dependencies:a,config:i}=s;const[n,l]=u.useState(null),{frequency:o,measure:d,strategy:c}=i,v=u.useRef(t),g=m(),p=rt(g),x=u.useCallback(function(f){f===void 0&&(f=[]),!p.current&&l(j=>j===null?f:j.concat(f.filter(N=>!j.includes(N))))},[p]),y=u.useRef(null),b=lt(f=>{if(g&&!r)return ts;if(!f||f===ts||v.current!==t||n!=null){const j=new Map;for(let N of t){if(!N)continue;if(n&&n.length>0&&!n.includes(N.id)&&N.rect.current){j.set(N.id,N.rect.current);continue}const C=N.node.current,h=C?new Ut(d(C),C):null;N.rect.current=h,h&&j.set(N.id,h)}return j}return f},[t,n,r,g,d]);return u.useEffect(()=>{v.current=t},[t]),u.useEffect(()=>{g||x()},[r,g]),u.useEffect(()=>{n&&n.length>0&&l(null)},[JSON.stringify(n)]),u.useEffect(()=>{g||typeof o!="number"||y.current!==null||(y.current=setTimeout(()=>{x(),y.current=null},o))},[o,g,x,...a]),{droppableRects:b,measureDroppableContainers:x,measuringScheduled:n!=null};function m(){switch(c){case nt.Always:return!1;case nt.BeforeDragging:return r;default:return!r}}}function Gt(t,s){return lt(r=>t?r||(typeof s=="function"?s(t):t):null,[s,t])}function ea(t,s){return Gt(t,s)}function ta(t){let{callback:s,disabled:r}=t;const a=Nt(s),i=u.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:n}=window;return new n(a)},[a,r]);return u.useEffect(()=>()=>i?.disconnect(),[i]),i}function Ct(t){let{callback:s,disabled:r}=t;const a=Nt(s),i=u.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:n}=window;return new n(a)},[r]);return u.useEffect(()=>()=>i?.disconnect(),[i]),i}function sa(t){return new Ut(_e(t),t)}function ss(t,s,r){s===void 0&&(s=sa);const[a,i]=u.useState(null);function n(){i(d=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=d??r)!=null?c:null}const v=s(t);return JSON.stringify(d)===JSON.stringify(v)?d:v})}const l=ta({callback(d){if(t)for(const c of d){const{type:v,target:g}=c;if(v==="childList"&&g instanceof HTMLElement&&g.contains(t)){n();break}}}}),o=Ct({callback:n});return me(()=>{n(),t?(o?.observe(t),l?.observe(document.body,{childList:!0,subtree:!0})):(o?.disconnect(),l?.disconnect())},[t]),a}function ra(t){const s=Gt(t);return ps(t,s)}const rs=[];function aa(t){const s=u.useRef(t),r=lt(a=>t?a&&a!==rs&&t&&s.current&&t.parentNode===s.current.parentNode?a:kt(t):rs,[t]);return u.useEffect(()=>{s.current=t},[t]),r}function na(t){const[s,r]=u.useState(null),a=u.useRef(t),i=u.useCallback(n=>{const l=Mt(n.target);l&&r(o=>o?(o.set(l,Rt(l)),new Map(o)):null)},[]);return u.useEffect(()=>{const n=a.current;if(t!==n){l(n);const o=t.map(d=>{const c=Mt(d);return c?(c.addEventListener("scroll",i,{passive:!0}),[c,Rt(c)]):null}).filter(d=>d!=null);r(o.length?new Map(o):null),a.current=t}return()=>{l(t),l(n)};function l(o){o.forEach(d=>{const c=Mt(d);c?.removeEventListener("scroll",i)})}},[i,t]),u.useMemo(()=>t.length?s?Array.from(s.values()).reduce((n,l)=>He(n,l),ge):ws(t):ge,[t,s])}function as(t,s){s===void 0&&(s=[]);const r=u.useRef(null);return u.useEffect(()=>{r.current=null},s),u.useEffect(()=>{const a=t!==ge;a&&!r.current&&(r.current=t),!a&&r.current&&(r.current=null)},[t]),r.current?at(t,r.current):ge}function ia(t){u.useEffect(()=>{if(!jt)return;const s=t.map(r=>{let{sensor:a}=r;return a.setup==null?void 0:a.setup()});return()=>{for(const r of s)r?.()}},t.map(s=>{let{sensor:r}=s;return r}))}function la(t,s){return u.useMemo(()=>t.reduce((r,a)=>{let{eventName:i,handler:n}=a;return r[i]=l=>{n(l,s)},r},{}),[t,s])}function Ds(t){return u.useMemo(()=>t?$r(t):null,[t])}const ns=[];function oa(t,s){s===void 0&&(s=_e);const[r]=t,a=Ds(r?Z(r):null),[i,n]=u.useState(ns);function l(){n(()=>t.length?t.map(d=>js(d)?a:new Ut(s(d),d)):ns)}const o=Ct({callback:l});return me(()=>{o?.disconnect(),l(),t.forEach(d=>o?.observe(d))},[t]),i}function Es(t){if(!t)return null;if(t.children.length>1)return t;const s=t.children[0];return it(s)?s:t}function ca(t){let{measure:s}=t;const[r,a]=u.useState(null),i=u.useCallback(c=>{for(const{target:v}of c)if(it(v)){a(g=>{const p=s(v);return g?{...g,width:p.width,height:p.height}:p});break}},[s]),n=Ct({callback:i}),l=u.useCallback(c=>{const v=Es(c);n?.disconnect(),v&&n?.observe(v),a(v?s(v):null)},[s,n]),[o,d]=ht(l);return u.useMemo(()=>({nodeRef:o,rect:r,setRef:d}),[r,o,d])}const da=[{sensor:Bt,options:{}},{sensor:zt,options:{}}],ua={current:{}},gt={draggable:{measure:Jt},droppable:{measure:Jt,strategy:nt.WhileDragging,frequency:Ot.Optimized},dragOverlay:{measure:_e}};class st extends Map{get(s){var r;return s!=null&&(r=super.get(s))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(s=>{let{disabled:r}=s;return!r})}getNodeFor(s){var r,a;return(r=(a=this.get(s))==null?void 0:a.node.current)!=null?r:void 0}}const xa={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new st,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:yt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:gt,measureDroppableContainers:yt,windowRect:null,measuringScheduled:!1},Ts={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:yt,draggableNodes:new Map,over:null,measureDroppableContainers:yt},ct=u.createContext(Ts),As=u.createContext(xa);function ma(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new st}}}function ga(t,s){switch(s.type){case H.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:s.initialCoordinates,active:s.active}};case H.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:s.coordinates.x-t.draggable.initialCoordinates.x,y:s.coordinates.y-t.draggable.initialCoordinates.y}}};case H.DragEnd:case H.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case H.RegisterDroppable:{const{element:r}=s,{id:a}=r,i=new st(t.droppable.containers);return i.set(a,r),{...t,droppable:{...t.droppable,containers:i}}}case H.SetDroppableDisabled:{const{id:r,key:a,disabled:i}=s,n=t.droppable.containers.get(r);if(!n||a!==n.key)return t;const l=new st(t.droppable.containers);return l.set(r,{...n,disabled:i}),{...t,droppable:{...t.droppable,containers:l}}}case H.UnregisterDroppable:{const{id:r,key:a}=s,i=t.droppable.containers.get(r);if(!i||a!==i.key)return t;const n=new st(t.droppable.containers);return n.delete(r),{...t,droppable:{...t.droppable,containers:n}}}default:return t}}function ha(t){let{disabled:s}=t;const{active:r,activatorEvent:a,draggableNodes:i}=u.useContext(ct),n=pt(a),l=pt(r?.id);return u.useEffect(()=>{if(!s&&!a&&n&&l!=null){if(!wt(n)||document.activeElement===n.target)return;const o=i.get(l);if(!o)return;const{activatorNode:d,node:c}=o;if(!d.current&&!c.current)return;requestAnimationFrame(()=>{for(const v of[d.current,c.current]){if(!v)continue;const g=dr(v);if(g){g.focus();break}}})}},[a,s,i,l,n]),null}function Ms(t,s){let{transform:r,...a}=s;return t!=null&&t.length?t.reduce((i,n)=>n({transform:i,...a}),r):r}function pa(t){return u.useMemo(()=>({draggable:{...gt.draggable,...t?.draggable},droppable:{...gt.droppable,...t?.droppable},dragOverlay:{...gt.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function fa(t){let{activeNode:s,measure:r,initialRect:a,config:i=!0}=t;const n=u.useRef(!1),{x:l,y:o}=typeof i=="boolean"?{x:i,y:i}:i;me(()=>{if(!l&&!o||!s){n.current=!1;return}if(n.current||!a)return;const c=s?.node.current;if(!c||c.isConnected===!1)return;const v=r(c),g=ps(v,a);if(l||(g.x=0),o||(g.y=0),n.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const p=ys(c);p&&p.scrollBy({top:g.y,left:g.x})}},[s,l,o,a,r])}const Dt=u.createContext({...ge,scaleX:1,scaleY:1});var Oe;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Oe||(Oe={}));const ya=u.memo(function(s){var r,a,i,n;let{id:l,accessibility:o,autoScroll:d=!0,children:c,sensors:v=da,collisionDetection:g=Dr,measuring:p,modifiers:x,...y}=s;const b=u.useReducer(ga,void 0,ma),[m,f]=b,[j,N]=pr(),[C,h]=u.useState(Oe.Uninitialized),w=C===Oe.Initialized,{draggable:{active:E,nodes:T,translate:A},droppable:{containers:O}}=m,L=E!=null?T.get(E):null,K=u.useRef({initial:null,translated:null}),q=u.useMemo(()=>{var X;return E!=null?{id:E,data:(X=L?.data)!=null?X:ua,rect:K}:null},[E,L]),Q=u.useRef(null),[we,he]=u.useState(null),[B,ke]=u.useState(null),ee=rt(y,Object.values(y)),Ce=ot("DndDescribedBy",l),Te=u.useMemo(()=>O.getEnabled(),[O]),W=pa(p),{droppableRects:se,measureDroppableContainers:D,measuringScheduled:z}=Zr(Te,{dragging:w,dependencies:[A.x,A.y],config:W.droppable}),F=Jr(T,E),pe=u.useMemo(()=>B?ft(B):null,[B]),te=_s(),de=ea(F,W.draggable.measure);fa({activeNode:E!=null?T.get(E):null,config:te.layoutShiftCompensation,initialRect:de,measure:W.draggable.measure});const I=ss(F,W.draggable.measure,de),Ie=ss(F?F.parentElement:null),le=u.useRef({activatorEvent:null,active:null,activeNode:F,collisionRect:null,collisions:null,droppableRects:se,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ae=O.getNodeFor((r=le.current.over)==null?void 0:r.id),ue=ca({measure:W.dragOverlay.measure}),De=(a=ue.nodeRef.current)!=null?a:F,Me=w?(i=ue.rect)!=null?i:I:null,dt=!!(ue.nodeRef.current&&ue.rect),ut=ra(dt?null:I),Ke=Ds(De?Z(De):null),fe=aa(w?Ae??F:null),ze=oa(fe),k=Ms(x,{transform:{x:A.x-ut.x,y:A.y-ut.y,scaleX:1,scaleY:1},activatorEvent:B,active:q,activeNodeRect:I,containerNodeRect:Ie,draggingNodeRect:Me,over:le.current.over,overlayNodeRect:ue.rect,scrollableAncestors:fe,scrollableAncestorRects:ze,windowRect:Ke}),R=pe?He(pe,A):null,Ue=na(fe),ye=as(Ue),Fe=as(Ue,[I]),be=He(k,ye),Be=Me?Ar(Me,k):null,Ye=q&&Be?g({active:q,collisionRect:Be,droppableRects:se,droppableContainers:Te,pointerCoordinates:R}):null,Wt=gs(Ye,"id"),[Se,Ht]=u.useState(null),Gs=dt?k:He(k,Fe),Ws=Er(Gs,(n=Se?.rect)!=null?n:null,I),Et=u.useRef(null),qt=u.useCallback((X,re)=>{let{sensor:ae,options:$e}=re;if(Q.current==null)return;const oe=T.get(Q.current);if(!oe)return;const ne=X.nativeEvent,ve=new ae({active:Q.current,activeNode:oe,event:ne,options:$e,context:le,onAbort(Y){if(!T.get(Y))return;const{onDragAbort:je}=ee.current,Ee={id:Y};je?.(Ee),j({type:"onDragAbort",event:Ee})},onPending(Y,Re,je,Ee){if(!T.get(Y))return;const{onDragPending:Je}=ee.current,Pe={id:Y,constraint:Re,initialCoordinates:je,offset:Ee};Je?.(Pe),j({type:"onDragPending",event:Pe})},onStart(Y){const Re=Q.current;if(Re==null)return;const je=T.get(Re);if(!je)return;const{onDragStart:Ee}=ee.current,Xe={activatorEvent:ne,active:{id:Re,data:je.data,rect:K}};Ze.unstable_batchedUpdates(()=>{Ee?.(Xe),h(Oe.Initializing),f({type:H.DragStart,initialCoordinates:Y,active:Re}),j({type:"onDragStart",event:Xe}),he(Et.current),ke(ne)})},onMove(Y){f({type:H.DragMove,coordinates:Y})},onEnd:Ge(H.DragEnd),onCancel:Ge(H.DragCancel)});Et.current=ve;function Ge(Y){return async function(){const{active:je,collisions:Ee,over:Xe,scrollAdjustedTranslate:Je}=le.current;let Pe=null;if(je&&Je){const{cancelDrop:Qe}=ee.current;Pe={activatorEvent:ne,active:je,collisions:Ee,delta:Je,over:Xe},Y===H.DragEnd&&typeof Qe=="function"&&await Promise.resolve(Qe(Pe))&&(Y=H.DragCancel)}Q.current=null,Ze.unstable_batchedUpdates(()=>{f({type:Y}),h(Oe.Uninitialized),Ht(null),he(null),ke(null),Et.current=null;const Qe=Y===H.DragEnd?"onDragEnd":"onDragCancel";if(Pe){const Tt=ee.current[Qe];Tt?.(Pe),j({type:Qe,event:Pe})}})}}},[T]),Hs=u.useCallback((X,re)=>(ae,$e)=>{const oe=ae.nativeEvent,ne=T.get($e);if(Q.current!==null||!ne||oe.dndKit||oe.defaultPrevented)return;const ve={active:ne};X(ae,re.options,ve)===!0&&(oe.dndKit={capturedBy:re.sensor},Q.current=$e,qt(ae,re))},[T,qt]),Vt=Qr(v,Hs);ia(v),me(()=>{I&&C===Oe.Initializing&&h(Oe.Initialized)},[I,C]),u.useEffect(()=>{const{onDragMove:X}=ee.current,{active:re,activatorEvent:ae,collisions:$e,over:oe}=le.current;if(!re||!ae)return;const ne={active:re,activatorEvent:ae,collisions:$e,delta:{x:be.x,y:be.y},over:oe};Ze.unstable_batchedUpdates(()=>{X?.(ne),j({type:"onDragMove",event:ne})})},[be.x,be.y]),u.useEffect(()=>{const{active:X,activatorEvent:re,collisions:ae,droppableContainers:$e,scrollAdjustedTranslate:oe}=le.current;if(!X||Q.current==null||!re||!oe)return;const{onDragOver:ne}=ee.current,ve=$e.get(Wt),Ge=ve&&ve.rect.current?{id:ve.id,rect:ve.rect.current,data:ve.data,disabled:ve.disabled}:null,Y={active:X,activatorEvent:re,collisions:ae,delta:{x:oe.x,y:oe.y},over:Ge};Ze.unstable_batchedUpdates(()=>{Ht(Ge),ne?.(Y),j({type:"onDragOver",event:Y})})},[Wt]),me(()=>{le.current={activatorEvent:B,active:q,activeNode:F,collisionRect:Be,collisions:Ye,droppableRects:se,draggableNodes:T,draggingNode:De,draggingNodeRect:Me,droppableContainers:O,over:Se,scrollableAncestors:fe,scrollAdjustedTranslate:be},K.current={initial:Me,translated:Be}},[q,F,Ye,Be,T,De,Me,se,O,Se,fe,be]),Kr({...te,delta:A,draggingRect:Be,pointerCoordinates:R,scrollableAncestors:fe,scrollableAncestorRects:ze});const qs=u.useMemo(()=>({active:q,activeNode:F,activeNodeRect:I,activatorEvent:B,collisions:Ye,containerNodeRect:Ie,dragOverlay:ue,draggableNodes:T,droppableContainers:O,droppableRects:se,over:Se,measureDroppableContainers:D,scrollableAncestors:fe,scrollableAncestorRects:ze,measuringConfiguration:W,measuringScheduled:z,windowRect:Ke}),[q,F,I,B,Ye,Ie,ue,T,O,se,Se,D,fe,ze,W,z,Ke]),Vs=u.useMemo(()=>({activatorEvent:B,activators:Vt,active:q,activeNodeRect:I,ariaDescribedById:{draggable:Ce},dispatch:f,draggableNodes:T,over:Se,measureDroppableContainers:D}),[B,Vt,q,I,f,Ce,T,Se,D]);return G.createElement(ms.Provider,{value:N},G.createElement(ct.Provider,{value:Vs},G.createElement(As.Provider,{value:qs},G.createElement(Dt.Provider,{value:Ws},c)),G.createElement(ha,{disabled:o?.restoreFocus===!1})),G.createElement(br,{...o,hiddenTextDescribedById:Ce}));function _s(){const X=we?.autoScrollEnabled===!1,re=typeof d=="object"?d.enabled===!1:d===!1,ae=w&&!X&&!re;return typeof d=="object"?{...d,enabled:ae}:{enabled:ae}}}),ba=u.createContext(null),is="button",va="Draggable";function ja(t){let{id:s,data:r,disabled:a=!1,attributes:i}=t;const n=ot(va),{activators:l,activatorEvent:o,active:d,activeNodeRect:c,ariaDescribedById:v,draggableNodes:g,over:p}=u.useContext(ct),{role:x=is,roleDescription:y="draggable",tabIndex:b=0}=i??{},m=d?.id===s,f=u.useContext(m?Dt:ba),[j,N]=ht(),[C,h]=ht(),w=la(l,s),E=rt(r);me(()=>(g.set(s,{id:s,key:n,node:j,activatorNode:C,data:E}),()=>{const A=g.get(s);A&&A.key===n&&g.delete(s)}),[g,s]);const T=u.useMemo(()=>({role:x,tabIndex:b,"aria-disabled":a,"aria-pressed":m&&x===is?!0:void 0,"aria-roledescription":y,"aria-describedby":v.draggable}),[a,x,b,m,y,v.draggable]);return{active:d,activatorEvent:o,activeNodeRect:c,attributes:T,isDragging:m,listeners:a?void 0:w,node:j,over:p,setNodeRef:N,setActivatorNodeRef:h,transform:f}}function Ss(){return u.useContext(As)}const Na="Droppable",wa={timeout:25};function $s(t){let{data:s,disabled:r=!1,id:a,resizeObserverConfig:i}=t;const n=ot(Na),{active:l,dispatch:o,over:d,measureDroppableContainers:c}=u.useContext(ct),v=u.useRef({disabled:r}),g=u.useRef(!1),p=u.useRef(null),x=u.useRef(null),{disabled:y,updateMeasurementsFor:b,timeout:m}={...wa,...i},f=rt(b??a),j=u.useCallback(()=>{if(!g.current){g.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{c(Array.isArray(f.current)?f.current:[f.current]),x.current=null},m)},[m]),N=Ct({callback:j,disabled:y||!l}),C=u.useCallback((T,A)=>{N&&(A&&(N.unobserve(A),g.current=!1),T&&N.observe(T))},[N]),[h,w]=ht(C),E=rt(s);return u.useEffect(()=>{!N||!h.current||(N.disconnect(),g.current=!1,N.observe(h.current))},[h,N]),u.useEffect(()=>(o({type:H.RegisterDroppable,element:{id:a,key:n,disabled:r,node:h,rect:p,data:E}}),()=>o({type:H.UnregisterDroppable,key:n,id:a})),[a]),u.useEffect(()=>{r!==v.current.disabled&&(o({type:H.SetDroppableDisabled,id:a,key:n,disabled:r}),v.current.disabled=r)},[a,n,r,o]),{active:l,rect:p,isOver:d?.id===a,node:h,over:d,setNodeRef:w}}function ka(t){let{animation:s,children:r}=t;const[a,i]=u.useState(null),[n,l]=u.useState(null),o=pt(r);return!r&&!a&&o&&i(o),me(()=>{if(!n)return;const d=a?.key,c=a?.props.id;if(d==null||c==null){i(null);return}Promise.resolve(s(c,n)).then(()=>{i(null)})},[s,a,n]),G.createElement(G.Fragment,null,r,a?u.cloneElement(a,{ref:l}):null)}const Ca={x:0,y:0,scaleX:1,scaleY:1};function Da(t){let{children:s}=t;return G.createElement(ct.Provider,{value:Ts},G.createElement(Dt.Provider,{value:Ca},s))}const Ea={position:"fixed",touchAction:"none"},Ta=t=>wt(t)?"transform 250ms ease":void 0,Aa=u.forwardRef((t,s)=>{let{as:r,activatorEvent:a,adjustScale:i,children:n,className:l,rect:o,style:d,transform:c,transition:v=Ta}=t;if(!o)return null;const g=i?c:{...c,scaleX:1,scaleY:1},p={...Ea,width:o.width,height:o.height,top:o.top,left:o.left,transform:Le.Transform.toString(g),transformOrigin:i&&a?Nr(a,o):void 0,transition:typeof v=="function"?v(a):v,...d};return G.createElement(r,{className:l,style:p,ref:s},n)}),Ma=t=>s=>{let{active:r,dragOverlay:a}=s;const i={},{styles:n,className:l}=t;if(n!=null&&n.active)for(const[o,d]of Object.entries(n.active))d!==void 0&&(i[o]=r.node.style.getPropertyValue(o),r.node.style.setProperty(o,d));if(n!=null&&n.dragOverlay)for(const[o,d]of Object.entries(n.dragOverlay))d!==void 0&&a.node.style.setProperty(o,d);return l!=null&&l.active&&r.node.classList.add(l.active),l!=null&&l.dragOverlay&&a.node.classList.add(l.dragOverlay),function(){for(const[d,c]of Object.entries(i))r.node.style.setProperty(d,c);l!=null&&l.active&&r.node.classList.remove(l.active)}},Sa=t=>{let{transform:{initial:s,final:r}}=t;return[{transform:Le.Transform.toString(s)},{transform:Le.Transform.toString(r)}]},$a={duration:250,easing:"ease",keyframes:Sa,sideEffects:Ma({styles:{active:{opacity:"0"}}})};function Ra(t){let{config:s,draggableNodes:r,droppableContainers:a,measuringConfiguration:i}=t;return Nt((n,l)=>{if(s===null)return;const o=r.get(n);if(!o)return;const d=o.node.current;if(!d)return;const c=Es(l);if(!c)return;const{transform:v}=Z(l).getComputedStyle(l),g=fs(v);if(!g)return;const p=typeof s=="function"?s:Pa(s);return ks(d,i.draggable.measure),p({active:{id:n,data:o.data,node:d,rect:i.draggable.measure(d)},draggableNodes:r,dragOverlay:{node:l,rect:i.dragOverlay.measure(c)},droppableContainers:a,measuringConfiguration:i,transform:g})})}function Pa(t){const{duration:s,easing:r,sideEffects:a,keyframes:i}={...$a,...t};return n=>{let{active:l,dragOverlay:o,transform:d,...c}=n;if(!s)return;const v={x:o.rect.left-l.rect.left,y:o.rect.top-l.rect.top},g={scaleX:d.scaleX!==1?l.rect.width*d.scaleX/o.rect.width:1,scaleY:d.scaleY!==1?l.rect.height*d.scaleY/o.rect.height:1},p={x:d.x-v.x,y:d.y-v.y,...g},x=i({...c,active:l,dragOverlay:o,transform:{initial:d,final:p}}),[y]=x,b=x[x.length-1];if(JSON.stringify(y)===JSON.stringify(b))return;const m=a?.({active:l,dragOverlay:o,...c}),f=o.node.animate(x,{duration:s,easing:r,fill:"forwards"});return new Promise(j=>{f.onfinish=()=>{m?.(),j()}})}}let ls=0;function Oa(t){return u.useMemo(()=>{if(t!=null)return ls++,ls},[t])}const La=G.memo(t=>{let{adjustScale:s=!1,children:r,dropAnimation:a,style:i,transition:n,modifiers:l,wrapperElement:o="div",className:d,zIndex:c=999}=t;const{activatorEvent:v,active:g,activeNodeRect:p,containerNodeRect:x,draggableNodes:y,droppableContainers:b,dragOverlay:m,over:f,measuringConfiguration:j,scrollableAncestors:N,scrollableAncestorRects:C,windowRect:h}=Ss(),w=u.useContext(Dt),E=Oa(g?.id),T=Ms(l,{activatorEvent:v,active:g,activeNodeRect:p,containerNodeRect:x,draggingNodeRect:m.rect,over:f,overlayNodeRect:m.rect,scrollableAncestors:N,scrollableAncestorRects:C,transform:w,windowRect:h}),A=Gt(p),O=Ra({config:a,draggableNodes:y,droppableContainers:b,measuringConfiguration:j}),L=A?m.setRef:void 0;return G.createElement(Da,null,G.createElement(ka,{animation:O},g&&E?G.createElement(Aa,{key:E,id:g.id,ref:L,as:o,activatorEvent:v,adjustScale:s,className:d,transition:n,rect:A,style:{zIndex:c,...i},transform:T},r):null))});function Rs(t,s,r){const a=t.slice();return a.splice(r<0?a.length+r:r,0,a.splice(s,1)[0]),a}function Ia(t,s){return t.reduce((r,a,i)=>{const n=s.get(a);return n&&(r[i]=n),r},Array(t.length))}function xt(t){return t!==null&&t>=0}function Ua(t,s){if(t===s)return!0;if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==s[r])return!1;return!0}function za(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Ps=t=>{let{rects:s,activeIndex:r,overIndex:a,index:i}=t;const n=Rs(s,a,r),l=s[i],o=n[i];return!o||!l?null:{x:o.left-l.left,y:o.top-l.top,scaleX:o.width/l.width,scaleY:o.height/l.height}},mt={scaleX:1,scaleY:1},Fa=t=>{var s;let{activeIndex:r,activeNodeRect:a,index:i,rects:n,overIndex:l}=t;const o=(s=n[r])!=null?s:a;if(!o)return null;if(i===r){const c=n[l];return c?{x:0,y:r<l?c.top+c.height-(o.top+o.height):c.top-o.top,...mt}:null}const d=Ba(n,i,r);return i>r&&i<=l?{x:0,y:-o.height-d,...mt}:i<r&&i>=l?{x:0,y:o.height+d,...mt}:{x:0,y:0,...mt}};function Ba(t,s,r){const a=t[s],i=t[s-1],n=t[s+1];return a?r<s?i?a.top-(i.top+i.height):n?n.top-(a.top+a.height):0:n?n.top-(a.top+a.height):i?a.top-(i.top+i.height):0:0}const Os="Sortable",Ls=G.createContext({activeIndex:-1,containerId:Os,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Ps,disabled:{draggable:!1,droppable:!1}});function Ga(t){let{children:s,id:r,items:a,strategy:i=Ps,disabled:n=!1}=t;const{active:l,dragOverlay:o,droppableRects:d,over:c,measureDroppableContainers:v}=Ss(),g=ot(Os,r),p=o.rect!==null,x=u.useMemo(()=>a.map(w=>typeof w=="object"&&"id"in w?w.id:w),[a]),y=l!=null,b=l?x.indexOf(l.id):-1,m=c?x.indexOf(c.id):-1,f=u.useRef(x),j=!Ua(x,f.current),N=m!==-1&&b===-1||j,C=za(n);me(()=>{j&&y&&v(x)},[j,x,y,v]),u.useEffect(()=>{f.current=x},[x]);const h=u.useMemo(()=>({activeIndex:b,containerId:g,disabled:C,disableTransforms:N,items:x,overIndex:m,useDragOverlay:p,sortedRects:Ia(x,d),strategy:i}),[b,g,C.draggable,C.droppable,N,x,m,d,p,i]);return G.createElement(Ls.Provider,{value:h},s)}const Wa=t=>{let{id:s,items:r,activeIndex:a,overIndex:i}=t;return Rs(r,a,i).indexOf(s)},Ha=t=>{let{containerId:s,isSorting:r,wasDragging:a,index:i,items:n,newIndex:l,previousItems:o,previousContainerId:d,transition:c}=t;return!c||!a||o!==n&&i===l?!1:r?!0:l!==i&&s===d},qa={duration:200,easing:"ease"},Is="transform",Va=Le.Transition.toString({property:Is,duration:0,easing:"linear"}),_a={roleDescription:"sortable"};function Ka(t){let{disabled:s,index:r,node:a,rect:i}=t;const[n,l]=u.useState(null),o=u.useRef(r);return me(()=>{if(!s&&r!==o.current&&a.current){const d=i.current;if(d){const c=_e(a.current,{ignoreTransform:!0}),v={x:d.left-c.left,y:d.top-c.top,scaleX:d.width/c.width,scaleY:d.height/c.height};(v.x||v.y)&&l(v)}}r!==o.current&&(o.current=r)},[s,r,a,i]),u.useEffect(()=>{n&&l(null)},[n]),n}function Ya(t){let{animateLayoutChanges:s=Ha,attributes:r,disabled:a,data:i,getNewIndex:n=Wa,id:l,strategy:o,resizeObserverConfig:d,transition:c=qa}=t;const{items:v,containerId:g,activeIndex:p,disabled:x,disableTransforms:y,sortedRects:b,overIndex:m,useDragOverlay:f,strategy:j}=u.useContext(Ls),N=Xa(a,x),C=v.indexOf(l),h=u.useMemo(()=>({sortable:{containerId:g,index:C,items:v},...i}),[g,i,C,v]),w=u.useMemo(()=>v.slice(v.indexOf(l)),[v,l]),{rect:E,node:T,isOver:A,setNodeRef:O}=$s({id:l,data:h,disabled:N.droppable,resizeObserverConfig:{updateMeasurementsFor:w,...d}}),{active:L,activatorEvent:K,activeNodeRect:q,attributes:Q,setNodeRef:we,listeners:he,isDragging:B,over:ke,setActivatorNodeRef:ee,transform:Ce}=ja({id:l,data:h,attributes:{..._a,...r},disabled:N.draggable}),Te=ir(O,we),W=!!L,se=W&&!y&&xt(p)&&xt(m),D=!f&&B,z=D&&se?Ce:null,pe=se?z??(o??j)({rects:b,activeNodeRect:q,activeIndex:p,overIndex:m,index:C}):null,te=xt(p)&&xt(m)?n({id:l,items:v,activeIndex:p,overIndex:m}):C,de=L?.id,I=u.useRef({activeId:de,items:v,newIndex:te,containerId:g}),Ie=v!==I.current.items,le=s({active:L,containerId:g,isDragging:B,isSorting:W,id:l,index:C,items:v,newIndex:I.current.newIndex,previousItems:I.current.items,previousContainerId:I.current.containerId,transition:c,wasDragging:I.current.activeId!=null}),Ae=Ka({disabled:!le,index:C,node:T,rect:E});return u.useEffect(()=>{W&&I.current.newIndex!==te&&(I.current.newIndex=te),g!==I.current.containerId&&(I.current.containerId=g),v!==I.current.items&&(I.current.items=v)},[W,te,g,v]),u.useEffect(()=>{if(de===I.current.activeId)return;if(de!=null&&I.current.activeId==null){I.current.activeId=de;return}const De=setTimeout(()=>{I.current.activeId=de},50);return()=>clearTimeout(De)},[de]),{active:L,activeIndex:p,attributes:Q,data:h,rect:E,index:C,newIndex:te,items:v,isOver:A,isSorting:W,isDragging:B,listeners:he,node:T,overIndex:m,over:ke,setNodeRef:Te,setActivatorNodeRef:ee,setDroppableNodeRef:O,setDraggableNodeRef:we,transform:Ae??pe,transition:ue()};function ue(){if(Ae||Ie&&I.current.newIndex===C)return Va;if(!(D&&!wt(K)||!c)&&(W||le))return Le.Transition.toString({...c,property:Is})}}function Xa(t,s){var r,a;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(r=t?.draggable)!=null?r:s.draggable,droppable:(a=t?.droppable)!=null?a:s.droppable}}function vt(t){if(!t)return!1;const s=t.data.current;return!!(s&&"sortable"in s&&typeof s.sortable=="object"&&"containerId"in s.sortable&&"items"in s.sortable&&"index"in s.sortable)}const Ja=[P.Down,P.Right,P.Up,P.Left],Qa=(t,s)=>{let{context:{active:r,collisionRect:a,droppableRects:i,droppableContainers:n,over:l,scrollableAncestors:o}}=s;if(Ja.includes(t.code)){if(t.preventDefault(),!r||!a)return;const d=[];n.getEnabled().forEach(g=>{if(!g||g!=null&&g.disabled)return;const p=i.get(g.id);if(p)switch(t.code){case P.Down:a.top<p.top&&d.push(g);break;case P.Up:a.top>p.top&&d.push(g);break;case P.Left:a.left>p.left&&d.push(g);break;case P.Right:a.left<p.left&&d.push(g);break}});const c=hs({collisionRect:a,droppableRects:i,droppableContainers:d});let v=gs(c,"id");if(v===l?.id&&c.length>1&&(v=c[1].id),v!=null){const g=n.get(r.id),p=n.get(v),x=p?i.get(p.id):null,y=p?.node.current;if(y&&x&&g&&p){const m=kt(y).some((w,E)=>o[E]!==w),f=Us(g,p),j=Za(g,p),N=m||!f?{x:0,y:0}:{x:j?a.width-x.width:0,y:j?a.height-x.height:0},C={x:x.left,y:x.top};return N.x&&N.y?C:at(C,N)}}}};function Us(t,s){return!vt(t)||!vt(s)?!1:t.data.current.sortable.containerId===s.data.current.sortable.containerId}function Za(t,s){return!vt(t)||!vt(s)||!Us(t,s)?!1:t.data.current.sortable.index<s.data.current.sortable.index}const zs=({task:t,onEdit:s,onDelete:r,onTaskClick:a,onRequestExchange:i,userRole:n})=>{const{attributes:l,listeners:o,setNodeRef:d,transform:c,transition:v,isDragging:g}=Ya({id:t.id}),{isDark:p}=J(),x=n==="USER"&&i&&t.assigneeId!==t.currentUserId,y={transform:Le.Transform.toString(c),transition:v,opacity:g?.5:1},b={LOW:"default",MEDIUM:"warning",HIGH:"danger"},m={PENDING:"warning",DONE:"info",COMPLETED:"success"},f=C=>C?new Date(C).toLocaleDateString():null,j=C=>C?new Date(C)<new Date&&t.status!=="COMPLETED":!1,N=()=>{switch(n){case"ADMIN":return!1;case"MODERATOR":return!1;case"MANAGER":return!0;case"USER":return t.assigneeId===t.currentUserId;default:return!1}};return e.jsxs("div",{ref:d,style:y,...l,...o,className:`
        ${p?"bg-gray-700 border-gray-600":"bg-white border-gray-200"} rounded-lg shadow-sm border p-3 sm:p-4 mb-3 cursor-grab
        hover:shadow-md transition-all duration-200
        ${j(t.dueDate)?"border-l-4 border-l-red-500":""}
        ${g?"rotate-3":""}
      `,onClick:()=>a&&a(t),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:`font-medium ${p?"text-white":"text-gray-900"} line-clamp-2 text-sm sm:text-base pr-2`,children:t.title}),N()&&e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx("button",{onClick:C=>{C.stopPropagation(),s(t)},className:"text-gray-400 hover:text-blue-600 text-sm",children:"âœï¸"}),n==="MANAGER"&&e.jsx("button",{onClick:C=>{C.stopPropagation(),r(t.id)},className:"text-gray-400 hover:text-red-600 text-sm",children:"ðŸ—‘ï¸"}),x&&e.jsx("button",{onClick:C=>{C.stopPropagation(),i(t)},className:"bg-blue-50 hover:bg-blue-100 text-blue-600 px-2 py-1 rounded text-xs font-medium transition-colors duration-200",title:"Request to exchange this task",children:"Exchange"})]})]}),x&&e.jsx("div",{className:`mt-3 pt-3 border-t ${p?"border-gray-600":"border-gray-100"}`,children:e.jsx("button",{onClick:C=>{C.stopPropagation(),i(t)},className:"w-full bg-gradient-to-r from-blue-500 to-green-500 hover:from-blue-600 hover:to-green-600 text-white px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 flex items-center justify-center gap-2",children:"ðŸ”„ Request Exchange"})}),t.description&&e.jsx("p",{className:`text-sm ${p?"text-gray-300":"text-gray-600"} mb-3 line-clamp-2`,children:t.description}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[e.jsx(_,{variant:m[t.status],size:"sm",children:t.status}),e.jsx(_,{variant:b[t.priority],size:"sm",children:t.priority}),t.dueDate&&e.jsx(_,{variant:j(t.dueDate)?"danger":"default",size:"sm",children:f(t.dueDate)})]}),t.assignee&&e.jsxs("div",{className:`flex items-center text-sm ${p?"text-gray-300":"text-gray-600"}`,children:[e.jsx("span",{className:`w-6 h-6 ${p?"bg-blue-900 text-blue-200":"bg-blue-100 text-blue-600"} rounded-full flex items-center justify-center text-xs font-medium mr-2`,children:t.assignee.username.charAt(0).toUpperCase()}),e.jsx("span",{children:t.assignee.username})]}),t.project&&e.jsx("div",{className:`mt-2 pt-2 border-t ${p?"border-gray-600":"border-gray-100"}`,children:e.jsx(_,{variant:"primary",size:"sm",children:t.project.name})})]})},os=({id:t,title:s,tasks:r,userRole:a,currentUserId:i,onTaskEdit:n,onTaskDelete:l,onTaskClick:o,onAddTask:d,onRequestExchange:c})=>{const{setNodeRef:v,isOver:g}=$s({id:t}),{isDark:p}=J(),x=()=>{const m=`${p?"bg-gray-800":"bg-gray-50"} rounded-lg p-3 sm:p-4 min-h-[400px] sm:min-h-[500px] w-full sm:w-80`;return g?`${m} ${p?"bg-blue-900 border-2 border-blue-500":"bg-blue-50 border-2 border-blue-300"}`:m},y=()=>r.length,b=()=>a==="MANAGER";return e.jsxs("div",{className:x(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold ${p?"text-white":"text-gray-900"} text-sm sm:text-base`,children:s}),e.jsxs("span",{className:`text-xs sm:text-sm ${p?"text-gray-400":"text-gray-500"}`,children:[y()," tasks"]})]}),b()&&e.jsx("button",{onClick:()=>d(t),className:"w-7 h-7 sm:w-8 sm:h-8 bg-blue-600 text-white rounded-full flex items-center justify-center hover:bg-blue-700 transition-colors text-sm sm:text-base",title:"Add new task",children:"+"})]}),e.jsx("div",{ref:v,className:"space-y-2",children:e.jsx(Ga,{items:r.map(m=>m.id),strategy:Fa,children:r.length===0?e.jsxs("div",{className:`text-center py-8 ${p?"text-gray-500":"text-gray-400"}`,children:[e.jsx("div",{className:"text-2xl mb-2",children:"ðŸ“‹"}),e.jsx("p",{className:"text-sm",children:"No tasks in this column"}),b()&&e.jsx("p",{className:"text-xs mt-1",children:"Click + to add a task"})]}):r.map(m=>e.jsx(zs,{task:{...m,currentUserId:i},userRole:a,onEdit:n,onDelete:l,onTaskClick:o,onRequestExchange:c},m.id))})})]})},Fs=({tasks:t,userRole:s,currentUserId:r,onTaskMove:a,onTaskEdit:i,onTaskDelete:n,onTaskClick:l,onAddTask:o,onRequestExchange:d,loading:c=!1,error:v=null})=>{const[g,p]=u.useState(null),{isDark:x}=J(),y=Array.isArray(t)?t:[],b=vr(Yt(Bt,{activationConstraint:{distance:8}}),Yt(zt,{coordinateGetter:Qa})),m=[{id:"PENDING",title:"To Do",color:"bg-gray-100"},{id:"IN_PROGRESS",title:"In Progress",color:"bg-blue-100"},{id:"DONE",title:"Done",color:"bg-yellow-100"},{id:"COMPLETED",title:"Completed",color:"bg-green-100"}],f=h=>y.filter(w=>{switch(s){case"USER":return w.status===h&&w.assigneeId===r;case"MANAGER":return w.status===h;case"MODERATOR":return w.status===h;case"ADMIN":return w.status===h;default:return w.status===h}}),j=h=>{const{active:w}=h,E=t.find(T=>T.id===w.id);p(E)},N=h=>{const{active:w,over:E}=h;if(p(null),!E)return;const T=w.id,A=E.id,O=t.find(K=>K.id===T);if(!O||O.status===A)return;(()=>{switch(s){case"USER":return O.assigneeId===r&&(O.status==="PENDING"&&(A==="IN_PROGRESS"||A==="DONE")||O.status==="IN_PROGRESS"&&(A==="PENDING"||A==="DONE")||O.status==="DONE"&&(A==="IN_PROGRESS"||A==="PENDING"));case"MANAGER":return!0;case"MODERATOR":return!1;case"ADMIN":return!1;default:return!1}})()?(s==="USER"&&A==="DONE"?$.success("Task moved to Done! Your manager will review and approve when complete.",{duration:4e3,icon:"âœ…"}):s==="MANAGER"&&O.status==="DONE"&&A==="COMPLETED"&&$.success("Task approved and marked as completed!",{duration:3e3,icon:"ðŸŽ‰"}),a(T,A)):$.error(`You don't have permission to move this task to ${A}`)},C=()=>{switch(s){case"USER":return"No tasks assigned to you yet. Contact your manager for task assignments.";case"MANAGER":return"No tasks in this project yet. Create your first task to get started.";case"MODERATOR":return"No tasks to monitor in this project.";case"ADMIN":return"System overview - no direct task participation.";default:return"No tasks available."}};return e.jsxs("div",{className:"p-3 sm:p-6",children:[e.jsxs("div",{className:"mb-4 sm:mb-6",children:[e.jsx("h2",{className:`text-xl sm:text-2xl font-bold ${x?"text-white":"text-gray-900"} mb-2`,children:"Project Board"}),e.jsxs("p",{className:`${x?"text-gray-300":"text-gray-600"} text-sm sm:text-base`,children:[s==="USER"&&"Manage your assigned tasks",s==="MANAGER"&&"Oversee project progress and approve tasks",s==="MODERATOR"&&"Monitor project activities",s==="ADMIN"&&"System overview"]})]}),e.jsxs(ya,{sensors:b,collisionDetection:hs,onDragStart:j,onDragEnd:N,children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 snap-x snap-mandatory",children:m.map(h=>e.jsx("div",{className:"flex-shrink-0 w-80 snap-start",children:e.jsx(os,{id:h.id,title:h.title,tasks:f(h.id),userRole:s,currentUserId:r,onTaskEdit:i,onTaskDelete:n,onTaskClick:l,onAddTask:o,onRequestExchange:d})},h.id))})}),e.jsx("div",{className:"hidden sm:block",children:e.jsx("div",{className:"flex gap-6 overflow-x-auto pb-4",children:m.map(h=>e.jsx(os,{id:h.id,title:h.title,tasks:f(h.id),userRole:s,currentUserId:r,onTaskEdit:i,onTaskDelete:n,onTaskClick:l,onAddTask:o,onRequestExchange:d},h.id))})}),e.jsx(La,{children:g?e.jsx(zs,{task:{...g,currentUserId:r},userRole:s,onEdit:()=>{},onDelete:()=>{},onTaskClick:()=>{},onRequestExchange:()=>{}}):null})]}),y.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“‹"}),e.jsx("h3",{className:`text-xl font-medium ${x?"text-white":"text-gray-900"} mb-2`,children:"No Tasks Yet"}),e.jsx("p",{className:`${x?"text-gray-300":"text-gray-600"} mb-6 max-w-md mx-auto`,children:C()}),s==="MANAGER"&&e.jsx("button",{onClick:()=>o("PENDING"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create First Task"})]})]})},en=({isOpen:t,onClose:s,onSave:r,selectedProject:a,projects:i=[],users:n=[]})=>{const{isDark:l}=J(),[o,d]=u.useState({title:"",description:"",projectId:a?.id||"",assigneeId:"",priority:"MEDIUM",status:"PENDING",dueDate:""}),[c,v]=u.useState(!1),g=async y=>{if(y.preventDefault(),!o.title.trim()){$.error("Task title is required");return}if(!o.projectId){$.error("Please select a project");return}v(!0);try{const b={...o,dueDate:o.dueDate||null};await r(b),$.success("Task created successfully!"),d({title:"",description:"",projectId:a?.id||"",assigneeId:"",priority:"MEDIUM",status:"PENDING",dueDate:""}),s()}catch(b){console.error("Failed to create task:",b),$.error("Failed to create task")}finally{v(!1)}},p=y=>{const{name:b,value:m}=y.target;d(f=>({...f,[b]:m}))},x=()=>{if(!o.projectId)return[];const y=i.find(f=>f.id===o.projectId);if(!y)return[];console.log("ðŸ” Selected project:",y),console.log("ðŸ” Project members:",y.members);const b=y.members||[];let m=[];if(b.length>0&&b[0].user)m=b.map(f=>({...f,taskCount:f.user._count?.assignedTasks||0}));else if(b.length>0&&b[0].username)m=b.map(f=>({userId:f.id,user:f,taskCount:f._count?.assignedTasks||0}));else{const f=b.map(j=>j.userId||j.id);m=n.filter(j=>f.includes(j.id)).map(j=>({userId:j.id,user:j,taskCount:j._count?.assignedTasks||0}))}return console.log("ðŸ” Processed project users:",m),m.sort((f,j)=>{const N=f.taskCount||0,C=j.taskCount||0;if(N!==C)return N-C;const h=(f.user?.name||f.user?.username||"").toLowerCase(),w=(j.user?.name||j.user?.username||"").toLowerCase();return h.localeCompare(w)})};return t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:s}),e.jsx("div",{className:`relative ${l?"bg-gray-800":"bg-white"} rounded-lg shadow-xl w-full max-w-md sm:max-w-lg max-h-[90vh] overflow-y-auto`,children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:`text-lg sm:text-xl font-semibold ${l?"text-white":"text-gray-900"}`,children:"Create New Task"}),e.jsx("button",{onClick:s,className:`${l?"text-gray-400 hover:text-gray-300":"text-gray-400 hover:text-gray-600"} transition-colors p-1`,children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${l?"text-gray-300":"text-gray-700"} mb-1`,children:"Project *"}),e.jsxs("select",{name:"projectId",value:o.projectId,onChange:p,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0,children:[e.jsx("option",{value:"",children:"Select a project"}),i.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${l?"text-gray-300":"text-gray-700"} mb-1`,children:"Task Title *"}),e.jsx("input",{type:"text",name:"title",value:o.title,onChange:p,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`,placeholder:"Enter task title",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${l?"text-gray-300":"text-gray-700"} mb-1`,children:"Description"}),e.jsx("textarea",{name:"description",value:o.description,onChange:p,rows:3,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`,placeholder:"Enter task description"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${l?"text-gray-300":"text-gray-700"} mb-1`,children:"Assignee (Project Members Only)"}),e.jsxs("select",{name:"assigneeId",value:o.assigneeId,onChange:p,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"",children:"Unassigned"}),x().map(y=>{const b=y.user||y,m=y.userId||y.id,f=b.name||b.username||"Unknown User",j=b.username||"",N=y.taskCount||0;return e.jsxs("option",{value:m,children:[j?`${j} - ${f}`:f," ","(",N," tasks)"]},m)})]}),o.projectId&&x().length===0&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"No team members found in selected project"}),x().length>0&&e.jsxs("p",{className:`text-xs ${l?"text-green-400":"text-green-600"} mt-1`,children:[x().length," project member(s) available (sorted by workload)"]}),!1]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${l?"text-gray-300":"text-gray-700"} mb-1`,children:"Priority"}),e.jsxs("select",{name:"priority",value:o.priority,onChange:p,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"LOW",children:"Low"}),e.jsx("option",{value:"MEDIUM",children:"Medium"}),e.jsx("option",{value:"HIGH",children:"High"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${l?"text-gray-300":"text-gray-700"} mb-1`,children:"Initial Status"}),e.jsxs("select",{name:"status",value:o.status,onChange:p,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"IN_PROGRESS",children:"In Progress"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${l?"text-gray-300":"text-gray-700"} mb-1`,children:"Due Date"}),e.jsx("input",{type:"date",name:"dueDate",value:o.dueDate,onChange:p,min:new Date().toISOString().split("T")[0],className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[e.jsx(S,{type:"submit",variant:"primary",disabled:c,className:"flex-1 w-full sm:w-auto",children:c?"Creating...":"Create Task"}),e.jsx(S,{type:"button",variant:"secondary",onClick:s,disabled:c,className:"w-full sm:w-auto",children:"Cancel"})]})]})]})})]}):null},tn=Xs({name:_t().min(1,"Project name is required").max(100,"Name too long"),description:_t().max(500,"Description too long").optional()}),sn=({isOpen:t,onClose:s,onSubmit:r,loading:a})=>{const{register:i,handleSubmit:n,formState:{errors:l},reset:o}=Ks({resolver:Ys(tn),defaultValues:{name:"",description:""}}),d=async c=>{try{await r(c),o(),s()}catch(v){console.error("Project creation failed:",v)}};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-md w-full",children:e.jsxs(M,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Create New Project"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),e.jsxs("form",{onSubmit:n(d),className:"space-y-4",children:[e.jsx(sr,{...i("name"),label:"Project Name",placeholder:"Enter project name",error:l.name?.message}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{...i("description"),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Project description (optional)"}),l.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.description.message})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(S,{type:"submit",loading:a,children:"Create Project"}),e.jsx(S,{type:"button",variant:"secondary",onClick:s,children:"Cancel"})]})]})]})})}):null},rn=({isOpen:t,onClose:s,onConfirm:r,title:a="Confirm Deletion",message:i="Are you sure you want to delete this item?",itemName:n="",loading:l=!1,dangerText:o="This action cannot be undone."})=>t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:s}),e.jsx("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.182 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h2",{className:"ml-3 text-xl font-semibold text-gray-900",children:a})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:l,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-gray-700 mb-2",children:i}),n&&e.jsx("div",{className:"bg-gray-50 rounded-md p-3 mb-3",children:e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Project:"," ",e.jsx("span",{className:"font-bold text-red-600",children:n})]})}),e.jsxs("p",{className:"text-sm text-red-600 font-medium",children:["âš ï¸ ",o]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[e.jsx(S,{onClick:s,variant:"secondary",disabled:l,className:"flex-1 w-full sm:w-auto order-2 sm:order-1",children:"Cancel"}),e.jsx(S,{onClick:r,variant:"danger",loading:l,className:"flex-1 w-full sm:w-auto order-1 sm:order-2",children:l?"Deleting...":"Delete Project"})]})]})})]}):null,Bs=({task:t,isOpen:s,onClose:r,onEdit:a})=>{const[i,n]=u.useState([]),[l,o]=u.useState(""),[d,c]=u.useState(!1),[v,g]=u.useState(!1),p=u.useCallback(async()=>{if(t?.id){g(!0);try{const m=await ie.getTaskComments(t.id);n(m.data||[])}catch(m){console.error("Failed to fetch comments:",m),$.error("Failed to load comments")}finally{g(!1)}}},[t?.id]);u.useEffect(()=>{s&&t&&p()},[s,t,p]);const x=async m=>{if(m.preventDefault(),!l.trim()){$.error("Comment cannot be empty");return}c(!0);try{await ie.addTaskComment(t.id,l.trim()),o(""),await p(),$.success("Comment added successfully!")}catch(f){console.error("Failed to add comment:",f),$.error("Failed to add comment")}finally{c(!1)}},y=m=>{switch(m){case"HIGH":return"text-red-600 bg-red-100";case"MEDIUM":return"text-yellow-600 bg-yellow-100";case"LOW":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},b=m=>{switch(m){case"COMPLETED":return"success";case"DONE":return"warning";case"IN_PROGRESS":return"primary";case"PENDING":return"default";default:return"default"}};return!s||!t?null:e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:r}),e.jsx("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:t.title}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_,{variant:b(t.status),children:t.status}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${y(t.priority)}`,children:[t.priority," Priority"]})]})]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Task Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Assigned to:"}),e.jsx("span",{className:"ml-2",children:t.assignee?.username||"Unassigned"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Project:"}),e.jsx("span",{className:"ml-2",children:t.project?.name||"Unknown Project"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Created by:"}),e.jsx("span",{className:"ml-2",children:t.createdBy?.username||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Due date:"}),e.jsx("span",{className:"ml-2",children:t.dueDate?new Date(t.dueDate).toLocaleDateString():"No due date"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Timeline"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Created:"}),e.jsx("span",{className:"ml-2",children:t.createdAt?new Date(t.createdAt).toLocaleDateString():"Unknown"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Last updated:"}),e.jsx("span",{className:"ml-2",children:t.updatedAt?new Date(t.updatedAt).toLocaleDateString():"Unknown"})]}),t.completedAt&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Completed:"}),e.jsx("span",{className:"ml-2",children:new Date(t.completedAt).toLocaleDateString()})]})]})]})]}),t.description&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Description"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:t.description})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Comments"}),e.jsx("form",{onSubmit:x,className:"mb-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("textarea",{value:l,onChange:m=>o(m.target.value),placeholder:"Add a comment...",rows:2,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx(S,{type:"submit",variant:"primary",disabled:d||!l.trim(),size:"sm",children:d?"Adding...":"Add"})]})}),e.jsx("div",{className:"space-y-3",children:v?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"}),e.jsx("span",{className:"text-sm text-gray-600 mt-2",children:"Loading comments..."})]}):i.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"No comments yet. Be the first to comment!"}):i.map(m=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:m.author?.username}),e.jsx("span",{className:"text-xs text-gray-500",children:m.createdAt?new Date(m.createdAt).toLocaleString():"Unknown time"})]}),e.jsx("p",{className:"text-gray-700 text-sm whitespace-pre-wrap",children:m.content})]},m.id))})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx(S,{onClick:()=>a(t),variant:"primary",children:"Edit Task"}),e.jsx(S,{onClick:r,variant:"secondary",children:"Close"})]})]})})]})},an=({task:t,isOpen:s,onClose:r,onSave:a,users:i=[]})=>{const[n,l]=u.useState({title:"",description:"",assigneeId:"",priority:"MEDIUM",status:"PENDING",dueDate:""}),[o,d]=u.useState(!1);u.useEffect(()=>{t&&l({title:t.title||"",description:t.description||"",assigneeId:t.assigneeId||"",priority:t.priority||"MEDIUM",status:t.status||"PENDING",dueDate:t.dueDate?t.dueDate.split("T")[0]:""})},[t]);const c=async g=>{if(g.preventDefault(),!n.title.trim()){$.error("Task title is required");return}d(!0);try{await a(t.id,n),$.success("Task updated successfully!"),r()}catch(p){console.error("Failed to update task:",p),$.error("Failed to update task")}finally{d(!1)}},v=g=>{const{name:p,value:x}=g.target;l(y=>({...y,[p]:x}))};return s?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:r}),e.jsx("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Task"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Task Title *"}),e.jsx("input",{type:"text",name:"title",value:n.title,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter task title",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:n.description,onChange:v,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter task description"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assignee"}),e.jsxs("select",{name:"assigneeId",value:n.assigneeId,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Unassigned"}),i.length===0?e.jsx("option",{disabled:!0,children:"No users available"}):i.map(g=>e.jsxs("option",{value:g.id,children:[g.username," - ",g.name]},g.id))]}),i.length===0&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:"No users available for assignment. Please refresh the page or contact your administrator."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{name:"priority",value:n.priority,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"LOW",children:"Low"}),e.jsx("option",{value:"MEDIUM",children:"Medium"}),e.jsx("option",{value:"HIGH",children:"High"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:n.status,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),e.jsx("option",{value:"DONE",children:"Done"}),e.jsx("option",{value:"COMPLETED",children:"Completed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",name:"dueDate",value:n.dueDate,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(S,{type:"submit",variant:"primary",disabled:o,className:"flex-1",children:o?"Saving...":"Save Changes"}),e.jsx(S,{type:"button",variant:"secondary",onClick:r,disabled:o,children:"Cancel"})]})]})]})})]}):null},nn=({isOpen:t,onClose:s,task:r,projectMembers:a,onSubmit:i})=>{const[n,l]=u.useState(""),[o,d]=u.useState(""),[c,v]=u.useState(!1);if(!t)return null;console.log("TaskExchangeModal - projectMembers:",a),console.log("TaskExchangeModal - task:",r);const g=async f=>{if(f.preventDefault(),!!n){v(!0);try{await i({taskId:r.id,receiverId:n,requestNote:o}),s(),l(""),d("")}catch(j){console.error("Exchange request failed:",j)}finally{v(!1)}}},p=a||[],x=p.map(f=>f.user?f.user:f),y=x.filter(f=>f.id!==r?.assigneeId&&f.id!==r?.currentUserId);console.log("Raw project members:",p),console.log("Normalized members:",x),console.log("Available members after filtering:",y);const b=[{id:"manager1",username:"Project Manager",role:"MANAGER",name:"John Manager"},{id:"user1",username:"team.member1",role:"USER",name:"Alice Developer"},{id:"user2",username:"team.member2",role:"USER",name:"Bob Designer"},{id:"user3",username:"team.member3",role:"USER",name:"Carol Tester"}].filter(f=>f.id!==r?.assigneeId&&f.id!==r?.currentUserId),m=y.length>0?y:b;return console.log("Available members to show:",m),e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-md w-full",children:e.jsxs(M,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Request Task Exchange"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium",children:r.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r.description}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(_,{variant:"primary",children:r.priority}),r.dueDate&&e.jsxs(_,{variant:"warning",children:["Due: ",new Date(r.dueDate).toLocaleDateString()]})]})]}),e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exchange with:"}),e.jsxs("select",{value:n,onChange:f=>l(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select a team member..."}),m.length===0?e.jsx("option",{value:"",disabled:!0,children:"No team members available"}):m.map(f=>e.jsxs("option",{value:f.id,children:[f.name||f.username," (",f.role,")"]},f.id))]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Request Message (Optional)"}),e.jsx("textarea",{value:o,onChange:f=>d(f.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Explain why you'd like to exchange this task...",maxLength:500}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[o.length,"/500 characters"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(S,{type:"submit",disabled:!n||c,loading:c,children:"Send Request"}),e.jsx(S,{type:"button",variant:"secondary",onClick:s,children:"Cancel"})]})]})]})})})},ln=({tasks:t=[],user:s})=>{const{isDark:r}=J(),[a,i]=u.useState("7d"),n=u.useMemo(()=>t.filter(p=>p.assigneeId===s?.id)||[],[t,s?.id]),l=n.filter(p=>p.status==="COMPLETED"),o=n.filter(p=>p.status==="IN_PROGRESS"),d=n.filter(p=>p.status==="PENDING"),c=u.useMemo(()=>{const p=n.length,x=p>0?l.length/p*100:0,y=l.filter(j=>j.createdAt&&j.updatedAt),b=y.length>0?y.reduce((j,N)=>{const C=new Date(N.createdAt),h=new Date(N.updatedAt);return j+(h-C)/(1e3*60*60*24)},0)/y.length:0,m={HIGH:n.filter(j=>j.priority==="HIGH").length,MEDIUM:n.filter(j=>j.priority==="MEDIUM").length,LOW:n.filter(j=>j.priority==="LOW").length},f=[{day:"Mon",completed:Math.floor(Math.random()*5)+1,target:4},{day:"Tue",completed:Math.floor(Math.random()*5)+1,target:4},{day:"Wed",completed:Math.floor(Math.random()*6)+2,target:4},{day:"Thu",completed:Math.floor(Math.random()*5)+2,target:4},{day:"Fri",completed:Math.floor(Math.random()*7)+1,target:4},{day:"Sat",completed:Math.floor(Math.random()*3)+1,target:3},{day:"Sun",completed:Math.floor(Math.random()*2)+1,target:2}];return{totalTasks:p,completedTasks:l.length,inProgressTasks:o.length,pendingTasks:d.length,completionRate:x,avgCompletionTime:b,priorityBreakdown:m,productivityTrend:f}},[n,l,o,d]),v=u.useCallback(({value:p,max:x,color:y="blue",showPercentage:b=!0,height:m="h-2",animated:f=!0})=>{const j=Math.round(p/x*100),N=Math.min(j,100);return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:`w-full ${m} ${r?"bg-gray-700":"bg-gray-200"} rounded-full overflow-hidden`,children:e.jsx("div",{className:`${m} ${f?"transition-all duration-500 ease-out":""} rounded-full ${y==="blue"?"bg-gradient-to-r from-blue-500 to-blue-600":y==="green"?"bg-gradient-to-r from-green-500 to-green-600":y==="yellow"?"bg-gradient-to-r from-yellow-500 to-yellow-600":y==="red"?"bg-gradient-to-r from-red-500 to-red-600":"bg-gradient-to-r from-purple-500 to-purple-600"}`,style:{width:`${N}%`}})}),b&&e.jsxs("span",{className:`text-xs ${r?"text-gray-400":"text-gray-600"} mt-1 block font-medium`,children:[j,"%"]})]})},[r]),g=u.useMemo(()=>[{title:"Total Tasks",value:c.totalTasks,change:"+12%",trend:"up",icon:"ðŸ“‹",color:"blue",description:"All assigned tasks"},{title:"Completed",value:c.completedTasks,change:"+8%",trend:"up",icon:"âœ…",color:"green",description:"Successfully finished"},{title:"In Progress",value:c.inProgressTasks,change:"-5%",trend:"down",icon:"â³",color:"yellow",description:"Currently working on"},{title:"Completion Rate",value:`${Math.round(c.completionRate)}%`,change:"+15%",trend:"up",icon:"ðŸŽ¯",color:"purple",description:"Overall success rate"}],[c]);return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold bg-gradient-to-r ${r?"from-blue-400 to-purple-400":"from-blue-600 to-purple-600"} bg-clip-text text-transparent`,children:"Personal Analytics"}),e.jsxs("p",{className:`text-sm ${r?"text-gray-400":"text-gray-600"} mt-2`,children:["Track your productivity and performance metrics â€¢"," ",s?.name||"User"]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("select",{value:a,onChange:p=>i(p.target.value),className:`px-4 py-2 rounded-xl border text-sm font-medium shadow-sm ${r?"bg-gray-800 border-gray-600 text-white hover:bg-gray-700":"bg-white border-gray-300 text-gray-900 hover:bg-gray-50"} focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200`,children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:g.map((p,x)=>e.jsx(M,{className:`p-6 transform transition-all duration-300 border-0 shadow-lg ${r?"bg-gray-800/80 backdrop-blur":"bg-white/80 backdrop-blur"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm font-medium ${r?"text-gray-400":"text-gray-600"} mb-1`,children:p.title}),e.jsx("p",{className:`text-3xl font-bold ${r?"text-white":"text-gray-900"} mb-2`,children:p.value}),e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${p.trend==="up"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"}`,children:p.change}),e.jsx("span",{className:`text-xs ${r?"text-gray-400":"text-gray-500"}`,children:"vs last period"})]}),e.jsx("p",{className:`text-xs ${r?"text-gray-500":"text-gray-400"}`,children:p.description})]}),e.jsx("div",{className:"text-3xl ml-4",children:p.icon})]})},x))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(M,{className:`p-6 ${r?"bg-gray-800/50":"bg-white/50"} backdrop-blur border-0 shadow-lg`,children:[e.jsxs("h3",{className:`text-lg font-semibold ${r?"text-white":"text-gray-900"} mb-4 flex items-center gap-2`,children:[e.jsx("span",{className:"text-xl",children:"ðŸ“Š"}),"Task Status Overview"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:`text-sm font-medium ${r?"text-gray-300":"text-gray-700"}`,children:"Completed"})]}),e.jsx("div",{className:"flex items-center gap-3 flex-1 mx-4",children:e.jsx(v,{value:c.completedTasks,max:c.totalTasks,color:"green",showPercentage:!1})}),e.jsx("span",{className:`text-sm font-bold ${r?"text-white":"text-gray-900"}`,children:c.completedTasks})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsx("span",{className:`text-sm font-medium ${r?"text-gray-300":"text-gray-700"}`,children:"In Progress"})]}),e.jsx("div",{className:"flex items-center gap-3 flex-1 mx-4",children:e.jsx(v,{value:c.inProgressTasks,max:c.totalTasks,color:"yellow",showPercentage:!1})}),e.jsx("span",{className:`text-sm font-bold ${r?"text-white":"text-gray-900"}`,children:c.inProgressTasks})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("span",{className:`text-sm font-medium ${r?"text-gray-300":"text-gray-700"}`,children:"Pending"})]}),e.jsx("div",{className:"flex items-center gap-3 flex-1 mx-4",children:e.jsx(v,{value:c.pendingTasks,max:c.totalTasks,color:"red",showPercentage:!1})}),e.jsx("span",{className:`text-sm font-bold ${r?"text-white":"text-gray-900"}`,children:c.pendingTasks})]})]})]}),e.jsxs(M,{className:`p-6 ${r?"bg-gray-800/50":"bg-white/50"} backdrop-blur border-0 shadow-lg`,children:[e.jsxs("h3",{className:`text-lg font-semibold ${r?"text-white":"text-gray-900"} mb-4 flex items-center gap-2`,children:[e.jsx("span",{className:"text-xl",children:"ðŸŽ¯"}),"Priority Distribution"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),e.jsx("span",{className:`text-sm font-medium ${r?"text-gray-300":"text-gray-700"}`,children:"High Priority"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${r?"bg-red-900 text-red-300":"bg-red-100 text-red-800"}`,children:c.priorityBreakdown.HIGH})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),e.jsx("span",{className:`text-sm font-medium ${r?"text-gray-300":"text-gray-700"}`,children:"Medium Priority"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${r?"bg-yellow-900 text-yellow-300":"bg-yellow-100 text-yellow-800"}`,children:c.priorityBreakdown.MEDIUM})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),e.jsx("span",{className:`text-sm font-medium ${r?"text-gray-300":"text-gray-700"}`,children:"Low Priority"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${r?"bg-green-900 text-green-300":"bg-green-100 text-green-800"}`,children:c.priorityBreakdown.LOW})})]})]})]})]}),e.jsxs(M,{className:`p-6 ${r?"bg-gray-800/50":"bg-white/50"} backdrop-blur border-0 shadow-lg`,children:[e.jsxs("h3",{className:`text-lg font-semibold ${r?"text-white":"text-gray-900"} mb-4 flex items-center gap-2`,children:[e.jsx("span",{className:"text-xl",children:"ðŸ“ˆ"}),"Weekly Productivity Trend"]}),e.jsx("div",{className:"grid grid-cols-7 gap-3",children:c.productivityTrend.map((p,x)=>{const y=Math.max(...c.productivityTrend.map(f=>Math.max(f.completed,f.target))),b=p.completed/y*100,m=p.target/y*100;return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-xs font-medium ${r?"text-gray-400":"text-gray-600"} mb-3`,children:p.day}),e.jsxs("div",{className:"relative h-32 bg-gray-200 dark:bg-gray-700 rounded-xl overflow-hidden",children:[e.jsx("div",{className:"absolute w-full border-2 border-dashed border-gray-400 dark:border-gray-500",style:{bottom:`${m}%`}}),e.jsx("div",{className:"absolute bottom-0 w-full bg-gradient-to-t from-blue-600 via-blue-500 to-blue-400 rounded-xl transition-all duration-700 ease-out",style:{height:`${b}%`}}),e.jsx("div",{className:"absolute bottom-0 w-full bg-gradient-to-t from-blue-400/50 to-transparent rounded-xl blur-sm",style:{height:`${b}%`}})]}),e.jsxs("div",{className:`text-xs font-bold ${r?"text-gray-300":"text-gray-700"} mt-2`,children:[p.completed,"/",p.target]})]},x)})}),e.jsxs("div",{className:"flex justify-center gap-6 mt-6 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-blue-600 to-blue-400 rounded"}),e.jsx("span",{className:`font-medium ${r?"text-gray-400":"text-gray-600"}`,children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-dashed border-gray-400 rounded"}),e.jsx("span",{className:`font-medium ${r?"text-gray-400":"text-gray-600"}`,children:"Target"})]})]})]}),e.jsxs(M,{className:`p-6 ${r?"bg-gray-800/50":"bg-white/50"} backdrop-blur border-0 shadow-lg`,children:[e.jsxs("h3",{className:`text-lg font-semibold ${r?"text-white":"text-gray-900"} mb-4 flex items-center gap-2`,children:[e.jsx("span",{className:"text-xl",children:"ðŸ’¡"}),"Performance Insights"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:`text-sm font-semibold ${r?"text-green-400":"text-green-600"} mb-4 flex items-center gap-2`,children:[e.jsx("span",{className:"text-lg",children:"âœ¨"}),"Strengths"]}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:`text-sm ${r?"text-green-400":"text-green-600"} flex items-start gap-3`,children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"High completion rate for priority tasks"})]}),e.jsxs("li",{className:`text-sm ${r?"text-green-400":"text-green-600"} flex items-start gap-3`,children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"Consistent daily productivity above 85%"})]}),e.jsxs("li",{className:`text-sm ${r?"text-green-400":"text-green-600"} flex items-start gap-3`,children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"Effective time management and task prioritization"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:`text-sm font-semibold ${r?"text-yellow-400":"text-yellow-600"} mb-4 flex items-center gap-2`,children:[e.jsx("span",{className:"text-lg",children:"ðŸŽ¯"}),"Growth Opportunities"]}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:`text-sm ${r?"text-yellow-400":"text-yellow-600"} flex items-start gap-3`,children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"Reduce pending task backlog by 20%"})]}),e.jsxs("li",{className:`text-sm ${r?"text-yellow-400":"text-yellow-600"} flex items-start gap-3`,children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"Focus more on medium-priority tasks completion"})]}),e.jsxs("li",{className:`text-sm ${r?"text-yellow-400":"text-yellow-600"} flex items-start gap-3`,children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"Improve weekend productivity consistency"})]})]})]})]})]})]})},on=({tasks:t=[],projects:s=[],teamMembers:r=[],exchangeLogs:a=[],tasksAwaitingApproval:i=[]})=>{const{isDark:n}=J(),l=t.length,o=t.filter(h=>h.status==="COMPLETED"),d=t.filter(h=>h.status==="IN_PROGRESS"),c=t.filter(h=>h.status==="PENDING"),v=t.filter(h=>h.status==="DONE"),g=l>0?Math.round(o.length/l*100):0,p=s.map(h=>{const w=t.filter(A=>A.projectId===h.id),E=w.filter(A=>A.status==="COMPLETED"),T=w.length>0?Math.round(E.length/w.length*100):0;return{...h,totalTasks:w.length,completedTasks:E.length,completionRate:T}}),x=r.map(h=>{const w=t.filter(A=>A.assigneeId===h.id),E=w.filter(A=>A.status==="COMPLETED"),T=w.filter(A=>A.status==="IN_PROGRESS");return{...h,totalTasks:w.length,completedTasks:E.length,inProgressTasks:T.length,completionRate:w.length>0?Math.round(E.length/w.length*100):0}}),y=new Date;y.setDate(y.getDate()-7);const b=t.filter(h=>h.status==="COMPLETED"&&h.updatedAt&&new Date(h.updatedAt)>=y).length,m=a.filter(h=>h.requestedAt&&new Date(h.requestedAt)>=y).length,f=i.length,j="1.5 days",N=r.length>0?{overloaded:x.filter(h=>h.totalTasks>8).length,balanced:x.filter(h=>h.totalTasks>=3&&h.totalTasks<=8).length,underutilized:x.filter(h=>h.totalTasks<3).length}:{overloaded:0,balanced:0,underutilized:0},C=a.length>0?Math.round(a.filter(h=>h.status==="ACCEPTED").length/a.length*100):0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(M,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[g,"%"]}),e.jsx("div",{className:`text-sm ${n?"text-gray-300":"text-gray-600"}`,children:"Team Completion Rate"})]})}),e.jsx(M,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:b}),e.jsx("div",{className:`text-sm ${n?"text-gray-300":"text-gray-600"}`,children:"Completed This Week"})]})}),e.jsx(M,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-orange-600",children:f}),e.jsx("div",{className:`text-sm ${n?"text-gray-300":"text-gray-600"}`,children:"Pending Approvals"})]})}),e.jsx(M,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:m}),e.jsx("div",{className:`text-sm ${n?"text-gray-300":"text-gray-600"}`,children:"Task Exchanges"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(M,{title:"Team Performance",subtitle:"Individual team member metrics",children:e.jsx("div",{className:"space-y-4",children:x.length===0?e.jsx("div",{className:`text-center py-4 ${n?"text-gray-400":"text-gray-500"}`,children:e.jsx("p",{children:"No team members data available"})}):x.slice(0,5).map(h=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 ${n?"bg-blue-600":"bg-blue-500"} rounded-full flex items-center justify-center text-white text-sm font-medium`,children:h.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:`font-medium ${n?"text-white":"text-gray-900"}`,children:h.name}),e.jsxs("div",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:[h.totalTasks," tasks â€¢ ",h.completionRate,"% complete"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-16 h-2 ${n?"bg-gray-700":"bg-gray-200"} rounded-full overflow-hidden`,children:e.jsx("div",{className:"h-full bg-blue-500",style:{width:`${h.completionRate}%`}})}),e.jsxs("span",{className:`text-sm font-medium ${n?"text-gray-300":"text-gray-600"}`,children:[h.completionRate,"%"]})]})]},h.id))})}),e.jsx(M,{title:"Project Status",subtitle:"Project completion overview",children:e.jsx("div",{className:"space-y-4",children:p.length===0?e.jsx("div",{className:`text-center py-4 ${n?"text-gray-400":"text-gray-500"}`,children:e.jsx("p",{children:"No projects data available"})}):p.map(h=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:`font-medium ${n?"text-white":"text-gray-900"}`,children:h.name}),e.jsxs("div",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:[h.completedTasks,"/",h.totalTasks," tasks completed"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-20 h-2 ${n?"bg-gray-700":"bg-gray-200"} rounded-full overflow-hidden`,children:e.jsx("div",{className:"h-full bg-green-500",style:{width:`${h.completionRate}%`}})}),e.jsxs("span",{className:`text-sm font-medium ${n?"text-gray-300":"text-gray-600"}`,children:[h.completionRate,"%"]})]})]},h.id))})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(M,{title:"Workload Distribution",subtitle:"Team resource allocation",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),e.jsx("span",{className:n?"text-gray-300":"text-gray-700",children:"Overloaded (8+ tasks)"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:`font-medium ${n?"text-white":"text-gray-900"}`,children:[N.overloaded," members"]})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),e.jsx("span",{className:n?"text-gray-300":"text-gray-700",children:"Balanced (3-8 tasks)"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:`font-medium ${n?"text-white":"text-gray-900"}`,children:[N.balanced," members"]})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),e.jsx("span",{className:n?"text-gray-300":"text-gray-700",children:"Underutilized (<3 tasks)"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:`font-medium ${n?"text-white":"text-gray-900"}`,children:[N.underutilized," members"]})})]})]})}),e.jsx(M,{title:"Task Flow Metrics",subtitle:"Task progression analytics",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:c.length}),e.jsx("div",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:"Pending"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:d.length}),e.jsx("div",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:"In Progress"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:v.length}),e.jsx("div",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:"Awaiting Review"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:o.length}),e.jsx("div",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:"Completed"})]})]})})})]}),e.jsx(M,{title:"Management Insights",subtitle:"Key metrics and recommendations",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`font-medium mb-3 ${n?"text-white":"text-gray-900"}`,children:"ðŸ“Š Key Metrics"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:`text-sm ${n?"text-gray-300":"text-gray-600"}`,children:["â€¢ Average approval time: ",j]}),e.jsxs("div",{className:`text-sm ${n?"text-gray-300":"text-gray-600"}`,children:["â€¢ Task exchange acceptance rate: ",C,"%"]}),e.jsxs("div",{className:`text-sm ${n?"text-gray-300":"text-gray-600"}`,children:["â€¢ Team utilization:"," ",Math.round((N.balanced+N.overloaded)/(r.length||1)*100),"%"]}),e.jsxs("div",{className:`text-sm ${n?"text-gray-300":"text-gray-600"}`,children:["â€¢ Active projects: ",s.length]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-medium mb-3 ${n?"text-white":"text-gray-900"}`,children:"ðŸ’¡ Recommendations"}),e.jsxs("div",{className:"space-y-2",children:[N.overloaded>0&&e.jsx("div",{className:`text-sm ${n?"text-gray-300":"text-gray-600"}`,children:"â€¢ Redistribute tasks from overloaded team members"}),N.underutilized>0&&e.jsx("div",{className:`text-sm ${n?"text-gray-300":"text-gray-600"}`,children:"â€¢ Assign more tasks to underutilized team members"}),f>5&&e.jsx("div",{className:`text-sm ${n?"text-gray-300":"text-gray-600"}`,children:"â€¢ Review pending approvals to maintain team momentum"}),g<70&&e.jsx("div",{className:`text-sm ${n?"text-gray-300":"text-gray-600"}`,children:"â€¢ Focus on improving team completion rates"}),C<60&&e.jsx("div",{className:`text-sm ${n?"text-gray-300":"text-gray-600"}`,children:"â€¢ Review task exchange policies and communication"})]})]})]})})]})},cn=({user:t})=>{const[s,r]=u.useState("projects"),[a,i]=u.useState(null),[n,l]=u.useState([]),[o,d]=u.useState([]),[c,v]=u.useState([]),[g,p]=u.useState(!1),{isDark:x}=J(),[y,b]=u.useState({isOpen:!1,task:null}),[m,f]=u.useState({isOpen:!1,task:null}),[j,N]=u.useState({isOpen:!1}),[C,h]=u.useState({isOpen:!1}),[w,E]=u.useState({isOpen:!1,project:null,loading:!1}),{user:T}=cs(),{stats:A,tasksAwaitingApproval:O,allTasks:L,projects:K,loading:q,error:Q,approveTask:we,createProject:he,refreshDashboard:B,getProjectTasks:ke}=Js(),{tasks:ee,loading:Ce,error:Te,updateTask:W,deleteTask:se,fetchTasks:D}=ds(a?.id);if(u.useEffect(()=>{(async()=>{try{const R=await xe.getAllUsers();l(R.data||[])}catch(R){console.error("Failed to fetch users:",R),$.error("Failed to load users for assignment. Please refresh the page.")}})()},[]),u.useEffect(()=>{s==="exchanges"&&(async()=>{p(!0);try{const R=await We.getProjectExchanges();v(R.data||[])}catch(R){console.error("Failed to fetch exchange logs:",R),$.error("Failed to load exchange logs")}finally{p(!1)}})()},[s]),u.useEffect(()=>{if(a&&a.members){const k=a.members.map(R=>R.user?R.user:R);d(k)}else d([])},[a]),!t&&!T)return e.jsx(Ne,{className:"py-8",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:`ml-2 ${x?"text-gray-300":"text-gray-600"}`,children:"Loading dashboard..."})]})});const z=t||T,F=K||[],pe=L||[],te=O||[],de=async(k,R)=>{const Ue=ee?.find(ye=>ye.id===k);if(!(Ue&&Ue.status===R))try{await W(k,{status:R}),L?.find(Fe=>Fe.id===k)?.status==="DONE"&&R==="COMPLETED"?$.success("Task approved and marked as completed!",{duration:3e3,icon:"ðŸŽ‰"}):$.success("Task moved successfully!"),B()}catch(ye){console.error("Failed to move task:",ye),$.error("Failed to move task")}},I=async k=>{b({isOpen:!0,task:k})},Ie=async k=>{try{await se(k),$.success("Task deleted successfully!"),B()}catch(R){console.error("Failed to delete task:",R),$.error("Failed to delete task")}},le=k=>{f({isOpen:!0,task:k})},Ae=async()=>{N({isOpen:!0})},ue=async k=>{try{await we(k),$.success("Task approved successfully!")}catch(R){console.error("Failed to approve task:",R),$.error(R.message||"Failed to approve task")}},De=()=>{h({isOpen:!0})},Me=(k,R)=>{R.stopPropagation(),E({isOpen:!0,project:k,loading:!1})},dt=async()=>{if(w.project){E(k=>({...k,loading:!0}));try{await xe.deleteProject(w.project.id),$.success("Project deleted successfully!"),a?.id===w.project.id&&(i(null),r("overview")),B(),E({isOpen:!1,project:null,loading:!1})}catch(k){console.error("Failed to delete project:",k),$.error(k.response?.data?.message||"Failed to delete project"),E(R=>({...R,loading:!1}))}}},ut=async(k,R)=>{await W(k,R),B()},Ke=k=>{f({isOpen:!1,task:null}),b({isOpen:!0,task:k})},fe=async k=>{try{await ie.createTask(k),$.success("Task created successfully!"),B(),k.projectId===a?.id&&D&&await D()}catch(R){throw console.error("Failed to create task:",R),$.error("Failed to create task"),R}},ze=async k=>{await he(k),B()};return Q?e.jsx(Ne,{className:"py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-red-600 mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Error Loading Dashboard"}),e.jsx("p",{children:Q})]}),e.jsx(S,{onClick:B,variant:"primary",children:"Retry"})]})}):e.jsxs(Ne,{children:[e.jsxs("div",{className:"py-6",children:[e.jsx("div",{className:`${x?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow-sm border p-4 sm:p-6 mb-6`,children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl sm:text-3xl font-bold ${x?"text-white":"text-gray-900"}`,children:"Manager Dashboard ðŸ‘¨â€ðŸ’¼"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[e.jsx(_,{variant:"success",children:"MANAGER"}),e.jsxs("span",{className:`${x?"text-gray-300":"text-gray-600"} text-sm sm:text-base`,children:["Project Manager - ",z.username]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(S,{onClick:De,variant:"primary",className:"w-full sm:w-auto",children:"New Project"}),e.jsx("div",{className:"block sm:hidden",children:e.jsxs("select",{value:s,onChange:k=>r(k.target.value),className:`w-full px-3 py-2 border ${x?"border-gray-600 bg-gray-800 text-white":"border-gray-300 bg-white text-gray-900"} rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"projects",children:"Projects"}),e.jsx("option",{value:"kanban",children:"Kanban"}),e.jsxs("option",{value:"approvals",children:["Approvals (",te.length,")"]}),e.jsx("option",{value:"exchanges",children:"Exchange Logs"}),e.jsx("option",{value:"analytics",children:"Analytics"})]})}),e.jsxs("div",{className:"hidden sm:flex gap-2 flex-wrap",children:[e.jsx(S,{variant:s==="projects"?"primary":"secondary",onClick:()=>r("projects"),size:"sm",children:"Projects"}),e.jsx(S,{variant:s==="kanban"?"primary":"secondary",onClick:()=>r("kanban"),size:"sm",children:"Kanban"}),e.jsxs(S,{variant:s==="approvals"?"primary":"secondary",onClick:()=>r("approvals"),size:"sm",children:["Approvals (",te.length,")"]}),e.jsx(S,{variant:s==="exchanges"?"primary":"secondary",onClick:()=>r("exchanges"),size:"sm",children:"Exchange Logs"}),e.jsx(S,{variant:s==="analytics"?"primary":"secondary",onClick:()=>r("analytics"),size:"sm",children:"Analytics"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 sm:gap-4 mb-6",children:[e.jsx(M,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:A.projectCount}),e.jsx("div",{className:`text-sm ${x?"text-gray-300":"text-gray-600"}`,children:"Active Projects"})]})}),e.jsx(M,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:A.totalTasks}),e.jsx("div",{className:`text-sm ${x?"text-gray-300":"text-gray-600"}`,children:"Total Tasks"})]})}),e.jsx(M,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:A.tasksAwaitingApproval}),e.jsx("div",{className:`text-sm ${x?"text-gray-300":"text-gray-600"}`,children:"Awaiting Approval"})]})}),e.jsx(M,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:A.overdueTasks}),e.jsx("div",{className:`text-sm ${x?"text-gray-300":"text-gray-600"}`,children:"Overdue Tasks"})]})}),e.jsx(M,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:A.totalTeamMembers}),e.jsx("div",{className:`text-sm ${x?"text-gray-300":"text-gray-600"}`,children:"Team Members"})]})})]}),s==="projects"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{title:"My Projects",subtitle:"Projects you're managing",children:q?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:`ml-2 ${x?"text-gray-300":"text-gray-600"}`,children:"Loading projects..."})]}):F.length===0?e.jsxs("div",{className:`text-center py-8 ${x?"text-gray-400":"text-gray-500"}`,children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ“"}),e.jsx("p",{children:"No projects found"}),e.jsx(S,{onClick:De,variant:"primary",className:"mt-4",children:"Create your first project"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:F.map(k=>{const R=ke(k.id),Ue=R.filter(be=>be.status==="COMPLETED").length,ye=R.length,Fe=ye>0?Math.round(Ue/ye*100):0;return e.jsxs("div",{className:`border ${x?"border-gray-600 hover:bg-gray-700":"border-gray-200 hover:bg-gray-50"} rounded-lg p-3 sm:p-4 cursor-pointer relative group transition-colors`,onClick:()=>{i(k),r("kanban")},children:[(T.role==="ADMIN"||k.managerId===T.id)&&e.jsx("button",{onClick:be=>Me(k,be),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-red-100 hover:bg-red-200 text-red-600 p-1.5 rounded-full z-10",title:"Delete Project",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h4",{className:`font-medium ${x?"text-white":"text-gray-900"} pr-8 text-sm sm:text-base leading-tight`,children:k.name}),e.jsxs(_,{variant:"primary",size:"sm",children:[Fe,"%"]})]}),e.jsx("p",{className:`text-xs sm:text-sm ${x?"text-gray-300":"text-gray-600"} mb-3 line-clamp-2`,children:k.description}),e.jsxs("div",{className:`flex justify-between text-xs ${x?"text-gray-400":"text-gray-500"} mb-3`,children:[e.jsxs("span",{children:[ye," tasks"]}),e.jsxs("span",{children:[k.members?.length||0," members"]})]}),e.jsx("div",{className:`w-full ${x?"bg-gray-600":"bg-gray-200"} rounded-full h-2`,children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${Fe}%`}})})]},k.id)})})}),e.jsx(M,{title:"Team Overview",subtitle:"Recent team activity",children:pe.length===0?e.jsxs("div",{className:`text-center py-8 ${x?"text-gray-400":"text-gray-500"}`,children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ“‹"}),e.jsx("p",{children:"No tasks found"})]}):e.jsx("div",{className:"space-y-3",children:pe.slice(0,5).map(k=>e.jsxs("div",{className:"flex items-center justify-between border-b pb-2",children:[e.jsxs("div",{children:[e.jsx("h5",{className:`font-medium ${x?"text-white":"text-gray-900"}`,children:k.title}),e.jsxs("p",{className:`text-sm ${x?"text-gray-300":"text-gray-600"}`,children:[k.assignee?.username||"Unassigned"," â€¢"," ",k.project?.name||"Unknown Project"]})]}),e.jsx(_,{variant:k.status==="COMPLETED"?"success":k.status==="DONE"?"warning":"default",children:k.status})]},k.id))})})]}),s==="kanban"&&e.jsxs("div",{children:[a?e.jsx("div",{className:`mb-4 p-4 rounded-lg shadow-sm border ${x?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg sm:text-xl font-semibold ${x?"text-white":"text-gray-900"}`,children:a.name}),e.jsx("p",{className:`${x?"text-gray-300":"text-gray-600"} text-sm sm:text-base`,children:a.description})]}),e.jsx(S,{onClick:()=>r("projects"),variant:"secondary",size:"sm",className:"w-full sm:w-auto",children:"â† Back to Projects"})]})}):e.jsxs("div",{className:`mb-4 p-4 ${x?"bg-amber-900/20 border-amber-700/30":"bg-yellow-50 border-yellow-200"} rounded-lg`,children:[e.jsx("p",{className:`${x?"text-amber-300":"text-yellow-800"} text-sm sm:text-base`,children:"Please select a project from the Projects view to manage tasks in Kanban board."}),e.jsx(S,{onClick:()=>r("projects"),variant:"secondary",size:"sm",className:"mt-2 w-full sm:w-auto",children:"Go to Projects"})]}),a&&e.jsx(Fs,{tasks:ee||[],userRole:"MANAGER",currentUserId:z.id,onTaskMove:de,onTaskEdit:I,onTaskDelete:Ie,onTaskClick:le,onAddTask:Ae,loading:Ce,error:Te})]}),s==="approvals"&&e.jsx(M,{title:"Tasks Awaiting Approval",subtitle:"Review and approve completed tasks",children:e.jsx("div",{className:"space-y-4",children:q?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:`ml-2 ${x?"text-gray-300":"text-gray-600"}`,children:"Loading tasks awaiting approval..."})]}):te.length===0?e.jsxs("div",{className:`text-center py-8 ${x?"text-gray-400":"text-gray-500"}`,children:[e.jsx("div",{className:"text-3xl mb-2",children:"âœ…"}),e.jsx("p",{children:"No tasks awaiting approval"})]}):te.map(k=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:`font-medium ${x?"text-white":"text-gray-900"}`,children:k.title}),e.jsx("p",{className:`text-sm ${x?"text-gray-300":"text-gray-600"} mb-2`,children:k.description}),e.jsxs("div",{className:`flex items-center gap-4 text-sm ${x?"text-gray-400":"text-gray-500"}`,children:[e.jsxs("span",{children:["Completed by: ",k.assignee?.username||"Unknown"]}),e.jsxs("span",{children:["Project: ",k.project?.name||"Unknown Project"]}),e.jsxs("span",{children:["Due:"," ",k.dueDate?new Date(k.dueDate).toLocaleDateString():"No due date"]})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx(S,{size:"sm",variant:"success",onClick:()=>ue(k.id),disabled:q,children:q?"Approving...":"Approve"}),e.jsx(S,{size:"sm",variant:"secondary",onClick:()=>I(k),children:"Request Changes"})]})]})},k.id))})}),s==="exchanges"&&e.jsx(M,{title:"Task Exchange Logs",subtitle:"Track all task exchanges in your projects",children:g?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:`ml-2 ${x?"text-gray-300":"text-gray-600"}`,children:"Loading exchange logs..."})]}):c.length===0?e.jsxs("div",{className:`text-center py-8 ${x?"text-gray-400":"text-gray-500"}`,children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ”„"}),e.jsx("p",{className:"text-sm",children:"No task exchanges found"}),e.jsx("p",{className:"text-xs mt-1",children:"Exchanges will appear here when team members trade tasks"})]}):e.jsx("div",{className:"space-y-4",children:c.map(k=>e.jsx("div",{className:`border rounded-lg p-4 ${x?"border-gray-600":"border-gray-200"}`,children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:`font-medium ${x?"text-white":"text-gray-900"}`,children:k.task.title}),e.jsx(_,{variant:k.status==="ACCEPTED"?"success":k.status==="REJECTED"?"danger":k.status==="CANCELLED"?"secondary":"warning",size:"sm",children:k.status})]}),e.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 text-sm ${x?"text-gray-300":"text-gray-600"}`,children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"From:"})," ",k.requester.name," (",k.requester.username,")"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"To:"})," ",k.receiver.name," (",k.receiver.username,")"]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Project:"})," ",k.task.project.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Requested:"})," ",new Date(k.requestedAt).toLocaleDateString()]}),k.respondedAt&&e.jsxs("p",{children:[e.jsx("strong",{children:"Responded:"})," ",new Date(k.respondedAt).toLocaleDateString()]})]})]}),k.requestNote&&e.jsx("div",{className:`mt-2 p-2 rounded text-sm ${x?"bg-blue-900/30 text-blue-200":"bg-blue-50 text-blue-800"}`,children:e.jsxs("p",{children:[e.jsx("strong",{children:"Request Note:"})," ",k.requestNote]})}),k.responseNote&&e.jsx("div",{className:`mt-2 p-2 rounded text-sm ${x?"bg-gray-700 text-gray-200":"bg-gray-50 text-gray-800"}`,children:e.jsxs("p",{children:[e.jsx("strong",{children:"Response Note:"})," ",k.responseNote]})})]})})},k.id))})}),s==="analytics"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`mb-6 p-4 rounded-lg shadow-sm border ${x?"bg-gradient-to-r from-purple-900/20 to-indigo-900/20 border-purple-700/30":"bg-gradient-to-r from-purple-50 to-indigo-50 border-purple-200"}`,children:[e.jsxs("h2",{className:`text-xl font-bold ${x?"text-purple-300":"text-purple-900"} flex items-center gap-2`,children:["ðŸ“Š Manager Analytics Dashboard",e.jsx("span",{className:`text-sm ${x?"bg-purple-900/40 text-purple-200":"bg-purple-100 text-purple-800"} px-2 py-1 rounded-full`,children:"Active View"})]}),e.jsx("p",{className:`${x?"text-purple-400":"text-purple-700"} text-sm mt-1`,children:"Comprehensive team performance and project analytics"})]}),e.jsx(on,{tasks:pe,projects:F,teamMembers:n,exchangeLogs:c,tasksAwaitingApproval:te})]})]}),e.jsx(an,{task:y.task,isOpen:y.isOpen,onClose:()=>b({isOpen:!1,task:null}),onSave:ut,users:o.length>0?o:n}),e.jsx(Bs,{task:m.task,isOpen:m.isOpen,onClose:()=>f({isOpen:!1,task:null}),onEdit:Ke}),e.jsx(en,{isOpen:j.isOpen,onClose:()=>N({isOpen:!1}),onSave:fe,selectedProject:a,projects:F,users:o.length>0?o:n}),e.jsx(sn,{isOpen:C.isOpen,onClose:()=>h({isOpen:!1}),onSave:ze,users:n}),e.jsx(rn,{isOpen:w.isOpen,onClose:()=>E({isOpen:!1,project:null,loading:!1}),onConfirm:dt,title:"Delete Project",message:"Are you sure you want to delete this project? This will permanently remove the project and all associated tasks.",itemName:w.project?.name,loading:w.loading,dangerText:"All tasks, exchanges, and project data will be permanently lost."})]})},dn=({user:t})=>{const[s,r]=u.useState("monitoring");if(!t)return e.jsx(Ne,{className:"py-8",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading dashboard..."})]})});const a=[{id:"f1",type:"task_exchange",title:"Suspicious task exchange pattern",description:"User repeatedly requesting exchanges without valid reasons",reporter:"system",flaggedUser:"problematic_user",project:"Web App Redesign",severity:"HIGH",createdAt:"2025-09-23",status:"PENDING"},{id:"f2",type:"task_comment",title:"Inappropriate comment content",description:"Comment contains unprofessional language",reporter:"jane_dev",flaggedUser:"toxic_user",project:"Mobile App Development",severity:"MEDIUM",createdAt:"2025-09-22",status:"PENDING"}],i={totalProjects:25,totalUsers:156,totalTasks:1243,totalExchanges:89,flaggedItems:a.length,resolvedFlags:23},n=[{id:"a1",type:"task_exchange",description:"john_dev requested exchange with jane_dev",project:"Web App Redesign",timestamp:"2025-09-23 14:30",status:"normal"},{id:"a2",type:"task_completion",description:'alice_mobile completed "Setup project structure"',project:"Mobile App Development",timestamp:"2025-09-23 13:45",status:"normal"},{id:"a3",type:"multiple_exchanges",description:"problematic_user made 5 exchange requests in 1 hour",project:"Various",timestamp:"2025-09-23 12:00",status:"suspicious"}],l=(d,c)=>{console.log(`${c} flag ${d}`)},o=d=>{console.log("Suspending exchange:",d)};return e.jsx(Ne,{children:e.jsxs("div",{className:"py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Moderator Dashboard ðŸ›¡ï¸"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(_,{variant:"warning",children:"MODERATOR"}),e.jsxs("span",{className:"text-gray-600",children:["Content Moderator - ",t.username]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{variant:s==="monitoring"?"primary":"secondary",onClick:()=>r("monitoring"),children:"Monitoring"}),e.jsxs(S,{variant:s==="flags"?"primary":"secondary",onClick:()=>r("flags"),children:["Flagged Items (",a.length,")"]}),e.jsx(S,{variant:s==="analytics"?"primary":"secondary",onClick:()=>r("analytics"),children:"Analytics"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-6",children:[e.jsx(M,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.totalProjects}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Projects"})]})}),e.jsx(M,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.totalUsers}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Users"})]})}),e.jsx(M,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:i.totalTasks}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Tasks"})]})}),e.jsx(M,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:i.totalExchanges}),e.jsx("div",{className:"text-sm text-gray-600",children:"Task Exchanges"})]})}),e.jsx(M,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.flaggedItems}),e.jsx("div",{className:"text-sm text-gray-600",children:"Flagged Items"})]})}),e.jsx(M,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:i.resolvedFlags}),e.jsx("div",{className:"text-sm text-gray-600",children:"Resolved Flags"})]})})]}),s==="monitoring"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{title:"Real-time Activity Monitor",subtitle:"Monitor system-wide activity",children:e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:n.map(d=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${d.status==="suspicious"?"border-red-200 bg-red-50":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${d.status==="suspicious"?"bg-red-500":"bg-green-500"}`}),e.jsx("h5",{className:"font-medium",children:d.description})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[d.project," â€¢ ",d.timestamp]})]}),d.status==="suspicious"&&e.jsx(S,{size:"sm",variant:"warning",children:"Flag for Review"})]},d.id))})}),e.jsx(M,{title:"System Health",subtitle:"Current system status",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("div",{className:"text-green-500 text-2xl mb-2",children:"âœ…"}),e.jsx("div",{className:"font-medium",children:"System Status"}),e.jsx("div",{className:"text-sm text-gray-600",children:"All systems operational"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("div",{className:"text-yellow-500 text-2xl mb-2",children:"âš ï¸"}),e.jsx("div",{className:"font-medium",children:"Alert Level"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Low - ",a.length," items flagged"]})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("div",{className:"text-blue-500 text-2xl mb-2",children:"ðŸ“Š"}),e.jsx("div",{className:"font-medium",children:"Activity Level"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Normal - Active monitoring"})]})]})})]}),s==="flags"&&e.jsx(M,{title:"Flagged Items",subtitle:"Review and resolve flagged content",children:e.jsx("div",{className:"space-y-4",children:a.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸŽ¯"}),e.jsx("p",{children:"No items currently flagged"}),e.jsx("p",{className:"text-sm mt-1",children:"System is clean!"})]}):a.map(d=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_,{variant:d.severity==="HIGH"?"danger":d.severity==="MEDIUM"?"warning":"default",children:d.severity}),e.jsx(_,{variant:"secondary",children:d.type.replace("_"," ")})]}),e.jsx("h4",{className:"font-medium text-gray-900",children:d.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:d.description}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Flagged user:"," ",e.jsx("span",{className:"font-medium",children:d.flaggedUser})," ","â€¢ Reporter:"," ",e.jsx("span",{className:"font-medium",children:d.reporter})," â€¢ Project:"," ",e.jsx("span",{className:"font-medium",children:d.project})," â€¢",d.createdAt]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx(S,{size:"sm",variant:"success",onClick:()=>l(d.id,"resolve"),children:"Resolve"}),e.jsx(S,{size:"sm",variant:"warning",onClick:()=>l(d.id,"escalate"),children:"Escalate"}),e.jsx(S,{size:"sm",variant:"danger",onClick:()=>o(d.id),children:"Suspend"})]})]})},d.id))})}),s==="analytics"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{title:"Moderation Analytics",subtitle:"System usage and moderation statistics",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Flag Resolution Rate"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Resolved"}),e.jsx("span",{children:"85%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"85%"}})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Response Time"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Average: 2.3 hours"}),e.jsx("span",{children:"Target: < 4 hours"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"70%"}})})]})]})]})}),e.jsx(M,{title:"Trend Analysis",subtitle:"Weekly moderation trends",children:e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ“ˆ"}),e.jsx("p",{children:"Analytics charts would be implemented here"}),e.jsx("p",{className:"text-sm mt-1",children:"Integration with charting library needed"})]})})]})]})})},un=({user:t})=>{const{isDark:s}=J(),[r,a]=u.useState("overview"),[i,n]=u.useState({isOpen:!1,task:null}),[l,o]=u.useState({isOpen:!1,task:null}),d=D=>{a(D)},{projects:c,loading:v}=Qs(),g=c&&c.length>0?c[0]:null,{tasks:p,loading:x,fetchTasks:y,updateTaskStatus:b,deleteTask:m}=ds(g?.id),{exchanges:f,loading:j,acceptExchange:N,rejectExchange:C,requestExchange:h}=Zs();if(!t)return e.jsx(Ne,{className:"py-8",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:`ml-2 ${s?"text-gray-300":"text-gray-600"}`,children:"Loading dashboard..."})]})});if(v||x||j)return e.jsx(Ne,{className:"py-8",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:`ml-2 ${s?"text-gray-300":"text-gray-600"}`,children:"Loading your tasks..."})]})});const w=Array.isArray(p)?p:[],E=Array.isArray(f)?f:[];c&&!Array.isArray(c)&&console.error("Projects is not an array:",c);const T=w,A=w.filter(D=>D.assigneeId===t.id),O=T.filter(D=>D.status==="PENDING"),L=T.filter(D=>D.status==="DONE"),K=T.filter(D=>D.status==="COMPLETED"),q=async(D,z)=>{try{const F=A?.find(pe=>pe.id===D);if(F&&F.status===z)return;await b(D,z),z==="DONE"?$.success("Task moved to Done! Your manager will review and approve when complete.",{duration:4e3,icon:"âœ…"}):$.success(`Task moved to ${z==="PENDING"?"To Do":z==="IN_PROGRESS"?"In Progress":z}`)}catch(F){console.error("Failed to move task:",F),$.error("Failed to move task")}},Q=D=>{console.log("Editing task:",D),$("Task editing feature coming soon!")},we=async D=>{try{await m(D),$.success("Task deleted successfully")}catch(z){console.error("Failed to delete task:",z),$.error("Failed to delete task")}},he=D=>{n({isOpen:!0,task:D})},B=()=>{n({isOpen:!1,task:null})},ke=D=>{o({isOpen:!0,task:D})},ee=()=>{o({isOpen:!1,task:null})},Ce=async D=>{try{await h(D),$.success("Exchange request sent successfully!"),o({isOpen:!1,task:null})}catch(z){console.error("Failed to request exchange:",z),$.error("Failed to send exchange request")}},Te=D=>{console.log("Adding task with status:",D),$("Users cannot create tasks. Contact your manager.")},W=async D=>{try{await N(D),$.success("Exchange request accepted!"),await y()}catch(z){console.error("Failed to accept exchange:",z),$.error("Failed to accept exchange request")}},se=async D=>{try{await C(D),$.success("Exchange request rejected")}catch(z){console.error("Failed to reject exchange:",z),$.error("Failed to reject exchange request")}};return e.jsxs(Ne,{children:[e.jsxs("div",{className:"py-6",children:[e.jsx("div",{className:`${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow-sm border p-4 sm:p-6 mb-6`,children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:`text-2xl sm:text-3xl font-bold ${s?"text-white":"text-gray-900"}`,children:["Welcome back, ",t.username,"! ðŸ‘‹"]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[e.jsx(_,{variant:"primary",children:"USER"}),e.jsx("span",{className:`${s?"text-gray-300":"text-gray-600"} text-sm sm:text-base`,children:"Team Member"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsxs("select",{value:r,onChange:D=>d(D.target.value),className:`w-full px-3 py-2 border ${s?"border-gray-600 bg-gray-800 text-white":"border-gray-300 bg-white text-gray-900"} rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"overview",children:"ðŸ“Š Overview Dashboard"}),e.jsx("option",{value:"kanban",children:"ðŸ“‹ Kanban Board"}),e.jsx("option",{value:"analytics",children:"ðŸ“ˆ Analytics"})]})}),e.jsxs("div",{className:"hidden sm:flex gap-2",children:[e.jsx(S,{variant:r==="overview"?"primary":"outline",onClick:()=>d("overview"),size:"sm",className:`transition-all duration-200 ${r==="overview"?"shadow-lg scale-105":""}`,children:"ðŸ“Š Overview"}),e.jsx(S,{variant:r==="kanban"?"primary":"outline",onClick:()=>d("kanban"),size:"sm",className:`transition-all duration-200 ${r==="kanban"?"shadow-lg scale-105":"hover:scale-105"}`,children:"ðŸ“‹ Kanban"}),e.jsx(S,{variant:r==="analytics"?"primary":"outline",onClick:()=>d("analytics"),size:"sm",className:`transition-all duration-200 ${r==="analytics"?"shadow-lg scale-105":"hover:scale-105"}`,children:"ï¿½ Analytics"})]})]})]})}),r==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[e.jsx(M,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:A.length}),e.jsx("div",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:"My Tasks"})]})}),e.jsx(M,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:O.length}),e.jsx("div",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:"Team Pending"})]})}),e.jsx(M,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:L.length}),e.jsx("div",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:"Team Review"})]})}),e.jsx(M,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:K.length}),e.jsx("div",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:"Team Completed"})]})})]}),e.jsxs(M,{className:"overflow-hidden",children:[e.jsxs("div",{className:`p-4 border-b ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${s?"text-white":"text-gray-900"}`,children:"My Tasks"}),e.jsx("p",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:"Manage and track your assigned tasks"})]}),e.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:e.jsxs("table",{className:"w-full min-w-[800px]",children:[e.jsx("thead",{className:`${s?"bg-gray-800":"bg-gray-50"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${s?"text-gray-400":"text-gray-500"} uppercase tracking-wider w-8`}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${s?"text-gray-400":"text-gray-500"} uppercase tracking-wider min-w-[200px]`,children:"Task"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${s?"text-gray-400":"text-gray-500"} uppercase tracking-wider min-w-[120px]`,children:"Status"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${s?"text-gray-400":"text-gray-500"} uppercase tracking-wider min-w-[100px]`,children:"Priority"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${s?"text-gray-400":"text-gray-500"} uppercase tracking-wider min-w-[120px]`,children:"Due Date"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${s?"text-gray-400":"text-gray-500"} uppercase tracking-wider min-w-[150px]`,children:"Project"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium ${s?"text-gray-400":"text-gray-500"} uppercase tracking-wider min-w-[100px]`,children:"Actions"})]})}),e.jsx("tbody",{className:`${s?"bg-gray-900 divide-gray-700":"bg-white divide-gray-200"} divide-y`,children:w.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:"7",className:"px-4 py-12 text-center text-gray-400",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ“‹"}),e.jsx("p",{children:"No tasks assigned yet"})]})}):w.map(D=>{const z=D.dueDate&&new Date(D.dueDate)<new Date&&D.status!=="COMPLETED",F=D.assigneeId===t.id;return e.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${z?"bg-red-50":""}`,children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",onChange:()=>{}})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"flex-1",children:e.jsxs("button",{onClick:()=>he(D),className:"text-left hover:text-blue-600 transition-colors",children:[e.jsx("div",{className:`text-sm font-medium ${s?"text-white hover:text-blue-400":"text-gray-900 hover:text-blue-600"}`,children:D.title}),D.description&&e.jsx("div",{className:`text-xs ${s?"text-gray-400":"text-gray-500"} line-clamp-1 mt-1`,children:D.description})]})})})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${D.status==="COMPLETED"?"bg-green-100 text-green-800":D.status==="DONE"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:D.status==="PENDING"?"To Do":D.status==="DONE"?"Working on it":"Done"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${D.priority==="HIGH"?"bg-purple-100 text-purple-800":D.priority==="MEDIUM"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:D.priority})}),e.jsx("td",{className:"px-4 py-4",children:D.dueDate?e.jsxs("div",{className:`text-sm ${z?"text-red-600 font-medium":s?"text-gray-300":"text-gray-900"}`,children:[new Date(D.dueDate).toLocaleDateString(),z&&e.jsx("div",{className:"text-xs text-red-500",children:"Overdue"})]}):e.jsx("span",{className:"text-gray-400 text-sm",children:"No due date"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:`text-sm ${s?"text-gray-300":"text-gray-900"}`,children:D.project?.name||"No Project"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[F&&e.jsx("button",{onClick:()=>he(D),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",title:"View Details",children:"View"}),!F&&e.jsx("button",{onClick:()=>ke(D),className:"text-green-600 hover:text-green-800 text-sm font-medium",title:"Request Exchange",children:"Exchange"})]})})]},D.id)})})]})})]}),e.jsx(M,{title:"Task Exchange Requests",subtitle:"Pending requests from teammates",className:"mt-6",children:e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:E.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ”„"}),e.jsx("p",{className:"text-sm",children:"No pending exchange requests"})]}):E.filter(D=>D.receiverId===t.id&&D.status==="PENDING").map(D=>e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("h4",{className:"font-medium",children:D.task?.title||"Task Exchange"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Request from:"," ",e.jsx("span",{className:"font-medium",children:D.requester?.username})]}),D.requestNote&&e.jsxs("p",{className:"text-sm text-gray-500 italic mt-1",children:['"',D.requestNote,'"']})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{size:"sm",variant:"success",onClick:()=>W(D.id),children:"Accept"}),e.jsx(S,{size:"sm",variant:"secondary",onClick:()=>se(D.id),children:"Reject"})]})]},D.id))})})]}),r==="analytics"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`bg-gradient-to-r ${s?"from-purple-900/20 to-indigo-900/20 border-purple-700/30":"from-purple-50 to-indigo-50 border-purple-200"} border rounded-lg p-4 mb-6`,children:[e.jsxs("h2",{className:`text-xl font-bold ${s?"text-purple-300":"text-purple-900"} flex items-center gap-2`,children:["ðŸ“ˆ Analytics Dashboard",e.jsx("span",{className:`text-sm ${s?"bg-purple-900/40 text-purple-200":"bg-purple-100 text-purple-800"} px-2 py-1 rounded-full`,children:"Active View"})]}),e.jsx("p",{className:`${s?"text-purple-400":"text-purple-700"} text-sm mt-1`,children:"Track your productivity and performance metrics"})]}),e.jsx(ln,{tasks:w,user:t})]}),r==="kanban"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4 mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-green-900 flex items-center gap-2",children:["ðŸ“‹ Kanban Board",e.jsx("span",{className:"text-sm bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Active View"})]}),e.jsx("p",{className:"text-green-700 text-sm mt-1",children:"Drag and drop interface for managing your tasks"})]}),g?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${s?"text-white":"text-gray-900"}`,children:g.name}),e.jsx("p",{className:`${s?"text-gray-300":"text-gray-600"}`,children:g.description}),e.jsxs("p",{className:`text-sm ${s?"text-gray-400":"text-gray-500"} mt-1`,children:["Showing all project tasks (",T.length," total,"," ",A.length," assigned to you)"]})]}),e.jsx(Fs,{tasks:T||[],userRole:"USER",currentUserId:t.id,onTaskMove:q,onTaskEdit:Q,onTaskDelete:we,onTaskClick:he,onAddTask:Te,onRequestExchange:ke})]}):e.jsx(M,{title:"No Project Assigned",subtitle:"You haven't been assigned to any projects yet",children:e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ“‹"}),e.jsx("p",{children:"Contact your manager to be assigned to a project"})]})})]})]}),e.jsx(Bs,{isOpen:i.isOpen,task:i.task,onClose:B,canEdit:!1,currentUserId:t.id}),e.jsx(nn,{isOpen:l.isOpen,task:l.task,onClose:ee,projectMembers:g?.members||[],onSubmit:Ce})]})},hn=()=>{const{user:t,logout:s}=cs(),r=()=>{switch(t?.role){case"ADMIN":return e.jsx(nr,{user:t});case"MODERATOR":return e.jsx(dn,{user:t});case"MANAGER":return e.jsx(cn,{user:t});case"USER":default:return e.jsx(un,{user:t})}};return e.jsx(ar,{user:t,onLogout:s,children:r()})};export{hn as default};
